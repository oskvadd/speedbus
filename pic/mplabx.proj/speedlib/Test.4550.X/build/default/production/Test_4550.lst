MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (LIST)
                      00001 LIST P=18F4550, F=INHX32
                      00002 
                      00003 #define DEV_ID1 64
                      00004 #define DEV_ID2 47
                      00005 
                      00006 #include "P18F4550.INC"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC18F4550 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2011 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      01764         LIST
                      00007 ; IMPORTATNT! All the speedlib pre definitions, MUST be definde before the include
                      00008 ;#define ARC_16F         1
                      00009 #define ARC_18F         1
                      00010 #define on_got_IAH  got_iah
                      00011 ;#define REC_CUSTOM_JUMP custom_command_handler
                      00012 
                      00013              errorlevel -302
                      00014 
                      00015         CONFIG  FOSC=INTOSC_HS                                  ; HS oscillator, HS used by USB
                      00016         CONFIG  PWRT=ON                                 ; Power on timer
                      00017         CONFIG  BOR=OFF                                 ; Brown out off
                      00018         CONFIG  WDT=OFF                                 ; Watch dog off
                      00019         CONFIG  PBADEN=OFF                              ; Port B en digital IO
                      00020         CONFIG  LVP=OFF                                 ; Pas de prog single supply
                      00021         CONFIG  ICPRT=OFF                               ; Port de debug off
                      00022         CONFIG  DEBUG=OFF                               ; Debug off
                      00023 
                      00024         CONFIG  XINST=OFF
                      00025         CONFIG  MCLRE=OFF
                      00026 
                      00027 
                      00028         ;;      __config  _FCMEN_OFF& _IESO_OFF& _MCLRE_OFF& _WDT_OFF& _INTOSCIO
                      00029 ;;;
                      00030 ;;;    _FCMEN_OFF           ; -- fail safe clock monitor enable off
                      00031 ;;;    _IESO_OFF            ; -- int/ext switch over enable off
                      00032 ;;;    _BOR_ON              ; default, brown out reset on
                      00033 ;;;    _CPD_OFF             ; default, data eeprom protection off
                      00034 ;;;    _CP_OFF              ; default, program code protection off
                      00035 ;;;    _MCLR_OFF            ; -- use MCLR pin as digital input
                      00036 ;;;    _PWRTE_OFF           ; default, power up timer off
                      00037 ;;;    _WDT_OFF             ; -- watch dog timer off
                      00038 ;;;    _INTOSCIO            ; -- internal osc, RA6 and RA7 I/O
                      00039 ;;;
                      00040 
                      00041 ;;;  --< constants >---------------------------------------------------
                      00042 ;       cblock      USER_VARIABLE_SPACE
                      00043 ;        servo_1_val
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00044 ;        endc
                      00045 ;
                      00046 
                      00047         radix dec ;
                      00048 
  00000008            00049 clock   equ     8       ; 8 MHz
  00004B00            00050 baud    equ     19200  ; 19200, 57600, or 115200
  00000004            00051 brgdiv  equ     4       ; divider value for BRG16 = 1
                      00052 ;brgval  equ     (clock*10000000/baud/brgdiv+5)/10-1
  00000019            00053 brgval  equ     25
                      00054 
                      00055         cblock  0x69
  00000069            00056         current_s
  0000006A            00057         button_mem
  0000006B            00058         main_var
                      00059 ; b3 Nouse
                      00060 ; b2 Nouse
                      00061 ; b1 Used at change addr
                      00062 ; b0 Used at IAH change addr....
  0000006C            00063         c_iah_addr1
  0000006D            00064         c_iah_addr2
  0000006E            00065         c_iah_addr1s
  0000006F            00066         c_iah_addr2s
  00000070            00067         divisL
  00000071            00068         divisH
  00000072            00069         divid0    ; lsb
  00000073            00070         divid1
  00000074            00071         divid2
  00000075            00072         divid3    ; lsb into carry
  00000076            00073         remdrL    ; and then into partial remainder
  00000077            00074         remdrH
  00000078            00075         bitcnt
  00000079            00076         temp
  0000007A            00077         temp1
  0000007B            00078         temp2
  0000007C            00079         tmp1,tmp2,tmp3,tmp4,tmp5,tmp6,tmp7,tmp8,tmp9,tmp10
                      00080         endc
                      00081 
                      00082 
                      00083         org     0x000
000000 EF?? F???      00084         goto    v_reset
                      00085         org     0x016
000016 EF?? F???      00086         goto    intserv
                      00087 
00001A                00088 v_reset:
                      00089 
                      00090 
00001A 0E73           00091                    movlw   b'01110011' ; '01110000'                      |B1
00001C 6ED3           00092                    movwf   OSCCON      ;                                 |B1
                      00093 
00001E 0E0F           00094                   movlw   0x0f
000020 6EC1           00095                   movwf   ADCON1
                      00096 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000022 0E07           00097                   movlw   0x07
000024 6EB4           00098                   movwf   CMCON
                      00099 
000026 0E3F           00100                   movlw   b'00111111'
000028 6E92           00101                   movwf   TRISA ; Make PortA all input
00002A 6A80           00102                   clrf    PORTA
00002C 6A93           00103                   clrf    TRISB ; setup PORT B all outputs        |B1
00002E 6A94           00104                   clrf    TRISC ; setup PORT C all outputs        |B1
000030 8E94           00105                   bsf     TRISC,7 ; For USART
000032 8C94           00106                   bsf     TRISC,6 ; For USART
000034 6A95           00107                   clrf    TRISD
                      00108 
                      00109 
                      00110         ;;
                      00111         ;; Set interupts
                      00112         ;;
                      00113 
000036 0E20           00114                 movlw   b'00100000'
000038 6E9D           00115                 movwf   PIE1
                      00116 
                      00117         ;;
                      00118         ;;   setup UART module for 19200 baud (8 MHz Clock)
                      00119         ;;
00003A 0E19           00120                   movlw   low(brgval) ;                                 |B1
00003C 6EAF           00121                   movwf   SPBRG       ;                                 |B1
00003E 0E00           00122                   movlw   high(brgval) ;                                 |B1
000040 6EB0           00123                   movwf   SPBRGH       ;                                 |B1
                      00124                   #ifdef    ARC_16
                      00125                   bsf     BAUDCTL,BRG16 ; select 16 bit BRG               |B1
                      00126                   #endif
                      00127                   #ifdef    ARC_18
                      00128                   clrf    BAUDCON
                      00129 ;                  bsf     BAUDCON,TXCKP
                      00130                   bsf     BAUDCON,BRG16 ; select 16 bit BRG               |B1
                      00131                   #endif
000042 0E26           00132                   movlw   b'00100110'   ; '0-------' CSRC, n/a (async)    |B1
                      00133         ;;  '-0------' TX9 off, 8 bits      |B1
                      00134         ;;  '--1-----' TXEN, tx enabled     |B1
                      00135         ;;  '---0----' SYNC, async mode     |B1
                      00136         ;;  '----0---' SENDB, send brk      |B1
                      00137         ;;  '-----1--' BRGH, high speed     |B1
                      00138         ;;  '------00' TRMT, TX9D           |B1
000044 6EAC           00139                   movwf   TXSTA ;                                 |B1
                      00140 ;                 bcf     STATUS,RP0 ; bank 0                          |B0
000046 0E90           00141                   movlw   b'10010000' ; '1-------' SPEN, port enabled   |B0
                      00142         ;;  '-0------' RX9 off, 8 bits      |B0
                      00143         ;;  '--0-----' SREN, n/a (async)    |B0
                      00144         ;;  '---1----' CREN, rx enabled     |B0
                      00145         ;;  '----0---' ADDEN off            |B0
                      00146         ;;  '-----000' FERR, OERR, RX9D     |B0
000048 6EAB           00147                   movwf   RCSTA ;                                 |B0
00004A 50AE           00148                   movf    RCREG,W ; flush Rx Buffer                 |B0
00004C 50AE           00149                   movf    RCREG,W ;                                 |B0
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00150 
                      00151         ;;
                      00152         ;; Set Interrupts
                      00153         ;;
                      00154 
00004E 8EF2           00155                 bsf     INTCON, GIE
000050 8CF2           00156                 bsf     INTCON, PEIE
                      00157         ;;
                      00158         ;; SET RX/TX parameters
                      00159         ;;
                      00160 
000052 6A3E           00161         clrf    txreturn
                      00162 
                      00163         ;;      Do not clear the adress:es, use the one that is set, read the speedbus text, "Adress han
                            deling system!"
                      00164         ;;      clrf    adress1
                      00165         ;;      movlw   0x7e
                      00166         ;;      movwf   adress1
                      00167         ;;      movlw   0x7d
                      00168         ;;      movwf   adress2
                      00169         ;;      clrf    adress1
                      00170         ;;      clrf    adress2
                      00171 
000054 902F           00172         bcf     rc_gotflag,0
000056 EC?? F???      00173         call    init_speedlib
                      00174         ;;
                      00175         ;; Put a inalization value in the servo area/:s....
                      00176 
                      00177         ;clrf    PORTB
                      00178 
00005A EC?? F???      00179         call    start_display
00005E EC?? F???      00180         call    screen_0
                      00181 
000062 0E32           00182         movlw   50
000064 EC?? F???      00183         call    Delay
                      00184 
000068 6B6B           00185         clrf    main_var
                      00186 
00006A 0100           00187         movlb   0
                      00188 
00006C                00189 main:
                      00190 
00006C EC?? F???      00191         call    check_buttons
000070 B2AB           00192         btfsc   RCSTA,OERR
000072 EC?? F???      00193         call    recerror
000076 9082           00194         bcf     PORTC,0
                      00195         ;btfsc  PORTA, 0
                      00196         ;call   txporta
000078 2A2A           00197         incf    rand,F          ; Increase the random value
00007A EF?? F???      00198         goto    main
                      00199 
00007E                00200 got_iah:
00007E 0100           00201         banksel main_var
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000080 B16B           00202         btfsc   main_var,0 ; If this bit is set, the device is waiting for a IAH
000082 EF?? F???      00203         goto    got_iah_serve
000086 EF?? F???      00204         goto    restore
                      00205 
00008A                00206 got_iah_serve:
00008A 916B           00207         bcf     main_var,0
00008C EC?? F???      00208         call    screen_3
000090 EF?? F???      00209         goto    restore
                      00210 
000094                00211 printW:
                      00212         ; Remember, the function print directly! and backwards
000094 6AEA           00213         clrf    FSR0H
000096 6B79           00214         clrf    temp
000098 6B78           00215         clrf    bitcnt
00009A 94D8           00216         bcf     STATUS,Z
                      00217 
00009C                00218 printW_loop:
00009C 6B71           00219         clrf    divisH
00009E 0E0A           00220         movlw   10
0000A0 6F70           00221         movwf   divisL
0000A2 EC?? F???      00222         call    divide
0000A6 0E7C           00223         movlw   tmp1
0000A8 2579           00224         addwf   temp,W
0000AA 6EE9           00225         movwf   FSR0L
0000AC 5176           00226         movf    remdrL,W
0000AE 0F30           00227         addlw   48
0000B0 6EEF           00228         movwf   INDF0
0000B2 2B79           00229         incf    temp,F
0000B4 0E00           00230         movlw   0
0000B6 5D72           00231         subwf   divid0,W
0000B8 A4D8           00232         btfss   STATUS,Z
0000BA EF?? F???      00233         goto    printW_loop
                      00234 
0000BE 5179           00235         movf    temp,W
0000C0 6F7A           00236         movwf   temp1
                      00237 
0000C2                00238 printW_loop2:
0000C2 0E7C           00239         movlw   tmp1
0000C4 2579           00240         addwf   temp,W
0000C6 6EE9           00241         movwf   FSR0L
0000C8 06E9           00242         decf    FSR0L,F
0000CA 50EF           00243         movf    INDF0,W
0000CC EC?? F???      00244         call    w_char
0000D0 2F79           00245         decfsz  temp,F
0000D2 EF?? F???      00246         goto    printW_loop2
                      00247 
0000D6 0012           00248         return
                      00249 
0000D8                00250 check_buttons:
                      00251 ; Buttons at PORTA
                      00252 ; [X] +---------------+ [X]
                      00253 ; [2] | bzzzzz        | [5]
                      00254 ; [0] | peep peep     | [4]
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00255 ; [1] +---------------+ [3]
                      00256 
                      00257 
                      00258 
0000D8 0100           00259         banksel button_mem
0000DA 5080           00260         movf    PORTA,W
0000DC 5D6A           00261         subwf   button_mem,W
0000DE B4D8           00262         btfsc   STATUS,Z
0000E0 0012           00263         return
0000E2 5080           00264         movf    PORTA,W
0000E4 6F6A           00265         movwf   button_mem
0000E6 0EC8           00266         movlw   200
0000E8 EC?? F???      00267         call    d10ms
0000EC 0E00           00268         movlw   0
0000EE 5C80           00269         subwf   PORTA,W
0000F0 B4D8           00270         btfsc   STATUS,Z
0000F2 0012           00271         return
                      00272 
                      00273 
0000F4 0E00           00274         movlw   0
0000F6 5D69           00275         subwf   current_s,W
0000F8 B4D8           00276         btfsc   STATUS,Z
0000FA EF?? F???      00277         goto    check_buttons_0
0000FE 0E01           00278         movlw   1
000100 5D69           00279         subwf   current_s,W
000102 B4D8           00280         btfsc   STATUS,Z
000104 EF?? F???      00281         goto    check_buttons_1
000108 0E02           00282         movlw   2
00010A 5D69           00283         subwf   current_s,W
00010C B4D8           00284         btfsc   STATUS,Z
00010E EF?? F???      00285         goto    check_buttons_2
000112 0E03           00286         movlw   3
000114 5D69           00287         subwf   current_s,W
000116 B4D8           00288         btfsc   STATUS,Z
000118 EF?? F???      00289         goto    check_buttons_3
00011C 0E04           00290         movlw   4
00011E 5D69           00291         subwf   current_s,W
000120 B4D8           00292         btfsc   STATUS,Z
000122 EF?? F???      00293         goto    check_buttons_4
000126 0E05           00294         movlw   5
000128 5D69           00295         subwf   current_s,W
00012A B4D8           00296         btfsc   STATUS,Z
00012C EF?? F???      00297         goto    check_buttons_5
000130 0E06           00298         movlw   6
000132 5D69           00299         subwf   current_s,W
000134 B4D8           00300         btfsc   STATUS,Z
000136 EF?? F???      00301         goto    check_buttons_6
00013A 0012           00302         return
                      00303 
00013C                00304 check_buttons_0:
00013C B080           00305         btfsc   PORTA,0
00013E EC?? F???      00306         call    screen_1
000142 B280           00307         btfsc   PORTA,1
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000144 EC?? F???      00308         call    screen_2
000148 0012           00309         return
                      00310 
00014A                00311 check_buttons_1:
00014A B280           00312         btfsc   PORTA,1
00014C EF?? F???      00313         goto    check_buttons_1_b
000150                00314 check_buttons_1_b:
000150 916B           00315         bcf     main_var,0
000152 EC?? F???      00316         call    screen_0
000156 0012           00317         return
                      00318 
000158                00319 check_buttons_2:
000158 B280           00320         btfsc   PORTA,1
00015A EC?? F???      00321         call    screen_0
00015E B480           00322         btfsc   PORTA,2
000160 EC?? F???      00323         call    screen_2
000164 0012           00324         return
000166                00325 check_buttons_3:
000166 B280           00326         btfsc   PORTA,1
000168 EC?? F???      00327         call    screen_0
00016C B680           00328         btfsc   PORTA,3
00016E EF?? F???      00329         goto    check_buttons_3_s4
000172 0012           00330         return
                      00331 
000174                00332 check_buttons_3_s4:
000174 836B           00333         bsf     main_var,1
000176 EC?? F???      00334         call    screen_4
00017A 0012           00335         return
                      00336 
00017C                00337 check_buttons_4:
00017C B280           00338         btfsc   PORTA,1
00017E EC?? F???      00339         call    check_buttons_4_back
000182 B080           00340         btfsc   PORTA,0
000184 EF?? F???      00341         goto    check_buttons_4_stamp
000188 BA80           00342         btfsc   PORTA,5
00018A EF?? F???      00343         goto    check_buttons_4_addrX
00018E B880           00344         btfsc   PORTA,4
000190 EC?? F???      00345         call    check_buttons_4_inc_addrX
000194 B680           00346         btfsc   PORTA,3
000196 EC?? F???      00347         call    check_buttons_4_dec_addrX
00019A A680           00348         btfss   PORTA,3
00019C 0012           00349         return
00019E A880           00350         btfss   PORTA,4
0001A0 0012           00351         return
0001A2 EF?? F???      00352         goto    check_buttons_4_clear_num
                      00353 
0001A6                00354 check_buttons_4_back:
0001A6 EC?? F???      00355         call    disable_marker
0001AA EC?? F???      00356         call    screen_0
0001AE 0012           00357         return
                      00358 
0001B0                00359 check_buttons_4_stamp:
0001B0 0EFF           00360         movlw   0xFF
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0001B2 5D6C           00361         subwf   c_iah_addr1,W
0001B4 A4D8           00362         btfss   STATUS,Z
0001B6 EF?? F???      00363         goto    check_buttons_4_stamp_f
0001BA 0EFF           00364         movlw   0xFF
0001BC 5D6D           00365         subwf   c_iah_addr2,W
0001BE A4D8           00366         btfss   STATUS,Z
0001C0 EF?? F???      00367         goto    check_buttons_4_stamp_f
0001C4 EF?? F???      00368         goto    check_buttons_4_stamp_fail
0001C8                00369 check_buttons_4_stamp_f:
0001C8 EC?? F???      00370         call    disable_marker
0001CC EC?? F???      00371         call    screen_5
0001D0 0012           00372         return
                      00373 
0001D2                00374 check_buttons_4_stamp_fail:
0001D2 EC?? F???      00375         call    disable_marker
0001D6 EC?? F???      00376         call    screen_6
0001DA 0012           00377         return
                      00378 
0001DC                00379 check_buttons_4_clear_num:
0001DC A36B           00380         btfss   main_var,1
0001DE 6B6C           00381         clrf    c_iah_addr1
0001E0 B36B           00382         btfsc   main_var,1
0001E2 6B6D           00383         clrf    c_iah_addr2
0001E4 EC?? F???      00384         call    screen_4
0001E8 0012           00385         return
                      00386 
0001EA                00387 check_buttons_4_inc_addrX:
0001EA A36B           00388         btfss   main_var,1
0001EC 2B6C           00389         incf    c_iah_addr1,F
0001EE B36B           00390         btfsc   main_var,1
0001F0 2B6D           00391         incf    c_iah_addr2,F
0001F2 EC?? F???      00392         call    screen_4
0001F6 0012           00393         return
                      00394 
0001F8                00395 check_buttons_4_dec_addrX:
0001F8 A36B           00396         btfss   main_var,1
0001FA 076C           00397         decf    c_iah_addr1,F
0001FC B36B           00398         btfsc   main_var,1
0001FE 076D           00399         decf    c_iah_addr2,F
000200 EC?? F???      00400         call    screen_4
000204 0012           00401         return
                      00402 
000206                00403 check_buttons_4_addrX:
000206 736B           00404         btg     main_var,1
000208 EC?? F???      00405         call    screen_4
00020C 0012           00406         return
                      00407 
00020E                00408 check_buttons_5:
00020E B280           00409         btfsc   PORTA,1
000210 EC?? F???      00410         call    screen_0
000214 B080           00411         btfsc   PORTA,0
000216 EC?? F???      00412         call    screen_5
00021A 0012           00413         return
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00414 
00021C                00415 check_buttons_6:
00021C A280           00416         btfss   PORTA,1
00021E 0012           00417         return
000220 EC?? F???      00418         call    enable_marker
000224 EC?? F???      00419         call    screen_4
000228 0012           00420         return
                      00421 
00022A                00422 screen_6:
00022A 0E06           00423         movlw   6
00022C 0100           00424         banksel current_s
00022E 6F69           00425         movwf   current_s
                      00426 
000230 EC?? F???      00427         call    clear_screen
                      00428 
000234 0E00           00429         movlw   0
000236 EC?? F???      00430         call    set_daddr
                      00431 
00023A 0E20           00432         movlw   ' '
00023C EC?? F???      00433         call    w_char
000240 0E20           00434         movlw   ' '
000242 EC?? F???      00435         call    w_char
000246 0E20           00436         movlw   ' '
000248 EC?? F???      00437         call    w_char
00024C 0E20           00438         movlw   ' '
00024E EC?? F???      00439         call    w_char
000252 0E53           00440         movlw   'S'
000254 EC?? F???      00441         call    w_char
000258 0E74           00442         movlw   't'
00025A EC?? F???      00443         call    w_char
00025E 0E61           00444         movlw   'a'
000260 EC?? F???      00445         call    w_char
000264 0E6D           00446         movlw   'm'
000266 EC?? F???      00447         call    w_char
00026A 0E70           00448         movlw   'p'
00026C EC?? F???      00449         call    w_char
000270 0E20           00450         movlw   ' '
000272 EC?? F???      00451         call    w_char
000276 0E61           00452         movlw   'a'
000278 EC?? F???      00453         call    w_char
00027C 0E64           00454         movlw   'd'
00027E EC?? F???      00455         call    w_char
000282 0E64           00456         movlw   'd'
000284 EC?? F???      00457         call    w_char
000288 0E72           00458         movlw   'r'
00028A EC?? F???      00459         call    w_char
00028E 0E65           00460         movlw   'e'
000290 EC?? F???      00461         call    w_char
000294 0E73           00462         movlw   's'
000296 EC?? F???      00463         call    w_char
00029A 0E73           00464         movlw   's'
00029C EC?? F???      00465         call    w_char
0002A0 0E20           00466         movlw   ' '
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0002A2 EC?? F???      00467         call    w_char
0002A6 0E20           00468         movlw   ' '
0002A8 EC?? F???      00469         call    w_char
0002AC 0E20           00470         movlw   ' '
0002AE EC?? F???      00471         call    w_char
                      00472 
0002B2 0E40           00473         movlw   64
0002B4 EC?? F???      00474         call    set_daddr
                      00475 
0002B8 0E46           00476         movlw   'F'
0002BA EC?? F???      00477         call    w_char
0002BE 0E61           00478         movlw   'a'
0002C0 EC?? F???      00479         call    w_char
0002C4 0E69           00480         movlw   'i'
0002C6 EC?? F???      00481         call    w_char
0002CA 0E6C           00482         movlw   'l'
0002CC EC?? F???      00483         call    w_char
0002D0 0E65           00484         movlw   'e'
0002D2 EC?? F???      00485         call    w_char
0002D6 0E64           00486         movlw   'd'
0002D8 EC?? F???      00487         call    w_char
0002DC 0E20           00488         movlw   ' '
0002DE EC?? F???      00489         call    w_char
0002E2 0E74           00490         movlw   't'
0002E4 EC?? F???      00491         call    w_char
0002E8 0E6F           00492         movlw   'o'
0002EA EC?? F???      00493         call    w_char
0002EE 0E20           00494         movlw   ' '
0002F0 EC?? F???      00495         call    w_char
0002F4 0E73           00496         movlw   's'
0002F6 EC?? F???      00497         call    w_char
0002FA 0E74           00498         movlw   't'
0002FC EC?? F???      00499         call    w_char
000300 0E61           00500         movlw   'a'
000302 EC?? F???      00501         call    w_char
000306 0E6D           00502         movlw   'm'
000308 EC?? F???      00503         call    w_char
00030C 0E70           00504         movlw   'p'
00030E EC?? F???      00505         call    w_char
000312 0E20           00506         movlw   ' '
000314 EC?? F???      00507         call    w_char
000318 0E20           00508         movlw   ' '
00031A EC?? F???      00509         call    w_char
                      00510 
00031E 0E14           00511         movlw   20
000320 EC?? F???      00512         call    set_daddr
                      00513 
000324 0E41           00514         movlw   'A'
000326 EC?? F???      00515         call    w_char
00032A 0E64           00516         movlw   'd'
00032C EC?? F???      00517         call    w_char
000330 0E72           00518         movlw   'r'
000332 EC?? F???      00519         call    w_char
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000336 0E65           00520         movlw   'e'
000338 EC?? F???      00521         call    w_char
00033C 0E73           00522         movlw   's'
00033E EC?? F???      00523         call    w_char
000342 0E73           00524         movlw   's'
000344 EC?? F???      00525         call    w_char
000348 0E20           00526         movlw   ' '
00034A EC?? F???      00527         call    w_char
00034E 0E69           00528         movlw   'i'
000350 EC?? F???      00529         call    w_char
000354 0E73           00530         movlw   's'
000356 EC?? F???      00531         call    w_char
00035A 0E20           00532         movlw   ' '
00035C EC?? F???      00533         call    w_char
000360 0E62           00534         movlw   'b'
000362 EC?? F???      00535         call    w_char
000366 0E72           00536         movlw   'r'
000368 EC?? F???      00537         call    w_char
00036C 0E6F           00538         movlw   'o'
00036E EC?? F???      00539         call    w_char
000372 0E61           00540         movlw   'a'
000374 EC?? F???      00541         call    w_char
000378 0E64           00542         movlw   'd'
00037A EC?? F???      00543         call    w_char
00037E 0E63           00544         movlw   'c'
000380 EC?? F???      00545         call    w_char
000384 0E61           00546         movlw   'a'
000386 EC?? F???      00547         call    w_char
00038A 0E73           00548         movlw   's'
00038C EC?? F???      00549         call    w_char
000390 0E74           00550         movlw   't'
000392 EC?? F???      00551         call    w_char
000396 0E3F           00552         movlw   '?'
000398 EC?? F???      00553         call    w_char
00039C 0E54           00554         movlw   84
00039E EC?? F???      00555         call    set_daddr
0003A2 0E3C           00556         movlw   '<'
0003A4 EC?? F???      00557         call    w_char
0003A8 0E2D           00558         movlw   '-'
0003AA EC?? F???      00559         call    w_char
0003AE 0E20           00560         movlw   ' '
0003B0 EC?? F???      00561         call    w_char
0003B4 0E42           00562         movlw   'B'
0003B6 EC?? F???      00563         call    w_char
0003BA 0E61           00564         movlw   'a'
0003BC EC?? F???      00565         call    w_char
0003C0 0E63           00566         movlw   'c'
0003C2 EC?? F???      00567         call    w_char
0003C6 0E6B           00568         movlw   'k'
0003C8 EC?? F???      00569         call    w_char
0003CC 0E20           00570         movlw   ' '
0003CE EC?? F???      00571         call    w_char
0003D2 0012           00572         return
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00573 
0003D4                00574 screen_5:
0003D4 0E05           00575         movlw   5
0003D6 0100           00576         banksel current_s
0003D8 6F69           00577         movwf   current_s
                      00578 
0003DA EC?? F???      00579         call    clear_screen
                      00580 
0003DE 0E00           00581         movlw   0
0003E0 EC?? F???      00582         call    set_daddr
                      00583 
0003E4 0E20           00584         movlw   ' '
0003E6 EC?? F???      00585         call    w_char
0003EA 0E20           00586         movlw   ' '
0003EC EC?? F???      00587         call    w_char
0003F0 0E20           00588         movlw   ' '
0003F2 EC?? F???      00589         call    w_char
0003F6 0E20           00590         movlw   ' '
0003F8 EC?? F???      00591         call    w_char
0003FC 0E53           00592         movlw   'S'
0003FE EC?? F???      00593         call    w_char
000402 0E74           00594         movlw   't'
000404 EC?? F???      00595         call    w_char
000408 0E61           00596         movlw   'a'
00040A EC?? F???      00597         call    w_char
00040E 0E6D           00598         movlw   'm'
000410 EC?? F???      00599         call    w_char
000414 0E70           00600         movlw   'p'
000416 EC?? F???      00601         call    w_char
00041A 0E20           00602         movlw   ' '
00041C EC?? F???      00603         call    w_char
000420 0E61           00604         movlw   'a'
000422 EC?? F???      00605         call    w_char
000426 0E64           00606         movlw   'd'
000428 EC?? F???      00607         call    w_char
00042C 0E64           00608         movlw   'd'
00042E EC?? F???      00609         call    w_char
000432 0E72           00610         movlw   'r'
000434 EC?? F???      00611         call    w_char
000438 0E65           00612         movlw   'e'
00043A EC?? F???      00613         call    w_char
00043E 0E73           00614         movlw   's'
000440 EC?? F???      00615         call    w_char
000444 0E73           00616         movlw   's'
000446 EC?? F???      00617         call    w_char
00044A 0E20           00618         movlw   ' '
00044C EC?? F???      00619         call    w_char
000450 0E20           00620         movlw   ' '
000452 EC?? F???      00621         call    w_char
000456 0E20           00622         movlw   ' '
000458 EC?? F???      00623         call    w_char
                      00624 
00045C 0E14           00625         movlw   20
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00045E EC?? F???      00626         call    set_daddr
                      00627 
000462 0E3C           00628         movlw   '<'
000464 EC?? F???      00629         call    w_char
000468 0E2D           00630         movlw   '-'
00046A EC?? F???      00631         call    w_char
00046E 0E20           00632         movlw   ' '
000470 EC?? F???      00633         call    w_char
000474 0E54           00634         movlw   'T'
000476 EC?? F???      00635         call    w_char
00047A 0E72           00636         movlw   'r'
00047C EC?? F???      00637         call    w_char
000480 0E79           00638         movlw   'y'
000482 EC?? F???      00639         call    w_char
000486 0E20           00640         movlw   ' '
000488 EC?? F???      00641         call    w_char
00048C 0E61           00642         movlw   'a'
00048E EC?? F???      00643         call    w_char
000492 0E67           00644         movlw   'g'
000494 EC?? F???      00645         call    w_char
000498 0E61           00646         movlw   'a'
00049A EC?? F???      00647         call    w_char
00049E 0E69           00648         movlw   'i'
0004A0 EC?? F???      00649         call    w_char
0004A4 0E6E           00650         movlw   'n'
0004A6 EC?? F???      00651         call    w_char
                      00652 
                      00653 
0004AA 0E54           00654         movlw   84
0004AC EC?? F???      00655         call    set_daddr
                      00656 
0004B0 0E3C           00657         movlw   '<'
0004B2 EC?? F???      00658         call    w_char
0004B6 0E2D           00659         movlw   '-'
0004B8 EC?? F???      00660         call    w_char
0004BC 0E20           00661         movlw   ' '
0004BE EC?? F???      00662         call    w_char
0004C2 0E42           00663         movlw   'B'
0004C4 EC?? F???      00664         call    w_char
0004C8 0E61           00665         movlw   'a'
0004CA EC?? F???      00666         call    w_char
0004CE 0E63           00667         movlw   'c'
0004D0 EC?? F???      00668         call    w_char
0004D4 0E6B           00669         movlw   'k'
0004D6 EC?? F???      00670         call    w_char
0004DA 0E20           00671         movlw   ' '
0004DC EC?? F???      00672         call    w_char
                      00673 
                      00674 
0004E0 0E40           00675         movlw   64
0004E2 EC?? F???      00676         call    set_daddr
                      00677 
0004E6 0E53           00678         movlw   'S'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004E8 EC?? F???      00679         call    w_char
0004EC 0E74           00680         movlw   't'
0004EE EC?? F???      00681         call    w_char
0004F2 0E61           00682         movlw   'a'
0004F4 EC?? F???      00683         call    w_char
0004F8 0E6D           00684         movlw   'm'
0004FA EC?? F???      00685         call    w_char
0004FE 0E70           00686         movlw   'p'
000500 EC?? F???      00687         call    w_char
000504 0E69           00688         movlw   'i'
000506 EC?? F???      00689         call    w_char
00050A 0E6E           00690         movlw   'n'
00050C EC?? F???      00691         call    w_char
000510 0E67           00692         movlw   'g'
000512 EC?? F???      00693         call    w_char
                      00694 
                      00695 
                      00696 
                      00697 
000516 0E03           00698         movlw   3
000518 6F7A           00699         movwf   temp1
00051A 962D           00700         bcf     rc_listen,3
00051C 902D           00701         bcf     rc_listen,0
00051E                00702 screen_5_stamp_rsp:
                      00703         ;; Send porta over TX
00051E 0E0C           00704         movlw   12
000520 6E3C           00705         movwf   framelen
                      00706         ;; * adress
000522 516E           00707         movf    c_iah_addr1s,W
000524 6E3F           00708         movwf   txframe
                      00709         ;; * adress
000526 516F           00710         movf    c_iah_addr2s,W
000528 6E40           00711         movwf   txframe+1
                      00712         ;; 0xff broadcast adress
00052A 5034           00713         movf    adress1,W
00052C 6E41           00714         movwf   txframe+2
                      00715         ;; 0xff broadcast adress
00052E 5035           00716         movf    adress2,W
000530 6E42           00717         movwf   txframe+3
                      00718         ;; 0x03 control bit
000532 0E03           00719         movlw   0x03
000534 6E43           00720         movwf   txframe+4
                      00721         ;; 0x01 protocoll
000536 0E00           00722         movlw   0x00
000538 6E44           00723         movwf   txframe+5
                      00724         ;; Data
00053A 0E03           00725         movlw   0x03
00053C 6E45           00726         movwf   txframe+6
                      00727         ;; Data
00053E 0E01           00728         movlw   0x01
000540 6E46           00729         movwf   txframe+7
                      00730         ;; Data
000542 516C           00731         movf    c_iah_addr1,W
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000544 6E47           00732         movwf   txframe+8
                      00733         ;; Data
000546 516D           00734         movf    c_iah_addr2,W
000548 6E48           00735         movwf   txframe+9
                      00736         ;; Padding
00054A 0E00           00737         movlw   0x00
00054C 6E49           00738         movwf   txframe+10
                      00739 
00054E EC?? F???      00740         call    txdo
                      00741 
000552 0EC8           00742         movlw   200
000554 EC?? F???      00743         call    Delay
000558 B62D           00744         btfsc   rc_listen,3
00055A EF?? F???      00745         goto    screen_5_stamp_got_rsp
                      00746 
                      00747         ;; Send porta over TX
00055E 0E09           00748         movlw   9
000560 6E3C           00749         movwf   framelen
                      00750         ;; * adress
000562 5034           00751         movf    adress1,W
000564 6E3F           00752         movwf   txframe
                      00753         ;; * adress
000566 5035           00754         movf    adress2,W
000568 6E40           00755         movwf   txframe+1
                      00756         ;; 0xff broadcast adress
00056A 5034           00757         movf    adress1,W
00056C 6E41           00758         movwf   txframe+2
                      00759         ;; 0xff broadcast adress
00056E 5035           00760         movf    adress2,W
000570 6E42           00761         movwf   txframe+3
                      00762         ;; 0x03 control bit
000572 0E03           00763         movlw   0x03
000574 6E43           00764         movwf   txframe+4
                      00765         ;; 0x01 protocoll
000576 0E00           00766         movlw   0x00
000578 6E44           00767         movwf   txframe+5
                      00768         ;; Data
00057A 0E01           00769         movlw   0x01
00057C 6E45           00770         movwf   txframe+6
                      00771         ;; Padding bit
00057E 0E00           00772         movlw   0x00
000580 6E46           00773         movwf   txframe+7
000582 EC?? F???      00774         call    txdo
000586 0EC8           00775         movlw   200
000588 EC?? F???      00776         call    Delay
00058C B02D           00777         btfsc   rc_listen,0
00058E EF?? F???      00778         goto    screen_5_stamp_got_rsp
000592 0E2E           00779         movlw   '.'
000594 EC?? F???      00780         call    w_char
000598 2F7A           00781         decfsz  temp1,f
00059A EF?? F???      00782         goto    screen_5_stamp_rsp
                      00783 
00059E 862D           00784         bsf     rc_listen,3
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0005A0 802D           00785         bsf     rc_listen,0
                      00786 
0005A2 0E40           00787         movlw   64
0005A4 EC?? F???      00788         call    set_daddr
                      00789 
0005A8 0E4E           00790         movlw   'N'
0005AA EC?? F???      00791         call    w_char
0005AE 0E6F           00792         movlw   'o'
0005B0 EC?? F???      00793         call    w_char
0005B4 0E20           00794         movlw   ' '
0005B6 EC?? F???      00795         call    w_char
0005BA 0E72           00796         movlw   'r'
0005BC EC?? F???      00797         call    w_char
0005C0 0E65           00798         movlw   'e'
0005C2 EC?? F???      00799         call    w_char
0005C6 0E73           00800         movlw   's'
0005C8 EC?? F???      00801         call    w_char
0005CC 0E70           00802         movlw   'p'
0005CE EC?? F???      00803         call    w_char
0005D2 0E6F           00804         movlw   'o'
0005D4 EC?? F???      00805         call    w_char
0005D8 0E6E           00806         movlw   'n'
0005DA EC?? F???      00807         call    w_char
0005DE 0E73           00808         movlw   's'
0005E0 EC?? F???      00809         call    w_char
0005E4 0E20           00810         movlw   ' '
0005E6 EC?? F???      00811         call    w_char
0005EA 0E20           00812         movlw   ' '
0005EC EC?? F???      00813         call    w_char
0005F0 0012           00814         return
                      00815 
0005F2                00816 screen_5_stamp_got_rsp:
                      00817 
0005F2 0E40           00818         movlw   64
0005F4 EC?? F???      00819         call    set_daddr
                      00820 
0005F8 0E41           00821         movlw   'A'
0005FA EC?? F???      00822         call    w_char
0005FE 0E64           00823         movlw   'd'
000600 EC?? F???      00824         call    w_char
000604 0E72           00825         movlw   'r'
000606 EC?? F???      00826         call    w_char
00060A 0E65           00827         movlw   'e'
00060C EC?? F???      00828         call    w_char
000610 0E73           00829         movlw   's'
000612 EC?? F???      00830         call    w_char
000616 0E73           00831         movlw   's'
000618 EC?? F???      00832         call    w_char
00061C 0E20           00833         movlw   ' '
00061E EC?? F???      00834         call    w_char
000622 0E67           00835         movlw   'g'
000624 EC?? F???      00836         call    w_char
000628 0E6F           00837         movlw   'o'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00062A EC?? F???      00838         call    w_char
00062E 0E74           00839         movlw   't'
000630 EC?? F???      00840         call    w_char
000634 0E20           00841         movlw   ' '
000636 EC?? F???      00842         call    w_char
00063A 0E73           00843         movlw   's'
00063C EC?? F???      00844         call    w_char
000640 0E74           00845         movlw   't'
000642 EC?? F???      00846         call    w_char
000646 0E61           00847         movlw   'a'
000648 EC?? F???      00848         call    w_char
00064C 0E6D           00849         movlw   'm'
00064E EC?? F???      00850         call    w_char
000652 0E70           00851         movlw   'p'
000654 EC?? F???      00852         call    w_char
000658 0E65           00853         movlw   'e'
00065A EC?? F???      00854         call    w_char
00065E 0E64           00855         movlw   'd'
000660 EC?? F???      00856         call    w_char
000664 0E21           00857         movlw   '!'
000666 EC?? F???      00858         call    w_char
00066A 0012           00859         return
                      00860 
                      00861 
00066C                00862 screen_4:
00066C 0E04           00863         movlw   4
00066E 0100           00864         banksel current_s
000670 6F69           00865         movwf   current_s
                      00866 
000672 EC?? F???      00867         call    clear_screen
                      00868 
000676 0E00           00869         movlw   0
000678 EC?? F???      00870         call    set_daddr
                      00871 
00067C 0E20           00872         movlw   ' '
00067E EC?? F???      00873         call    w_char
000682 0E20           00874         movlw   ' '
000684 EC?? F???      00875         call    w_char
000688 0E20           00876         movlw   ' '
00068A EC?? F???      00877         call    w_char
00068E 0E20           00878         movlw   ' '
000690 EC?? F???      00879         call    w_char
000694 0E43           00880         movlw   'C'
000696 EC?? F???      00881         call    w_char
00069A 0E68           00882         movlw   'h'
00069C EC?? F???      00883         call    w_char
0006A0 0E61           00884         movlw   'a'
0006A2 EC?? F???      00885         call    w_char
0006A6 0E6E           00886         movlw   'n'
0006A8 EC?? F???      00887         call    w_char
0006AC 0E67           00888         movlw   'g'
0006AE EC?? F???      00889         call    w_char
0006B2 0E65           00890         movlw   'e'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0006B4 EC?? F???      00891         call    w_char
0006B8 0E20           00892         movlw   ' '
0006BA EC?? F???      00893         call    w_char
0006BE 0E61           00894         movlw   'a'
0006C0 EC?? F???      00895         call    w_char
0006C4 0E64           00896         movlw   'd'
0006C6 EC?? F???      00897         call    w_char
0006CA 0E72           00898         movlw   'r'
0006CC EC?? F???      00899         call    w_char
0006D0 0E65           00900         movlw   'e'
0006D2 EC?? F???      00901         call    w_char
0006D6 0E73           00902         movlw   's'
0006D8 EC?? F???      00903         call    w_char
0006DC 0E73           00904         movlw   's'
0006DE EC?? F???      00905         call    w_char
0006E2 0E20           00906         movlw   ' '
0006E4 EC?? F???      00907         call    w_char
0006E8 0E20           00908         movlw   ' '
0006EA EC?? F???      00909         call    w_char
0006EE 0E20           00910         movlw   ' '
0006F0 EC?? F???      00911         call    w_char
                      00912 
                      00913 
0006F4 0E14           00914         movlw   20
0006F6 EC?? F???      00915         call    set_daddr
                      00916 
0006FA 0E3C           00917         movlw   '<'
0006FC EC?? F???      00918         call    w_char
000700 0E2D           00919         movlw   '-'
000702 EC?? F???      00920         call    w_char
000706 0E20           00921         movlw   ' '
000708 EC?? F???      00922         call    w_char
00070C 0E53           00923         movlw   'S'
00070E EC?? F???      00924         call    w_char
000712 0E74           00925         movlw   't'
000714 EC?? F???      00926         call    w_char
000718 0E61           00927         movlw   'a'
00071A EC?? F???      00928         call    w_char
00071E 0E6D           00929         movlw   'm'
000720 EC?? F???      00930         call    w_char
000724 0E70           00931         movlw   'p'
000726 EC?? F???      00932         call    w_char
00072A 0E20           00933         movlw   ' '
00072C EC?? F???      00934         call    w_char
000730 0E20           00935         movlw   ' '
000732 EC?? F???      00936         call    w_char
000736 0E20           00937         movlw   ' '
000738 EC?? F???      00938         call    w_char
00073C 0E20           00939         movlw   ' '
00073E EC?? F???      00940         call    w_char
000742 0E20           00941         movlw   ' '
000744 EC?? F???      00942         call    w_char
000748 0E20           00943         movlw   ' '
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00074A EC?? F???      00944         call    w_char
00074E 0E20           00945         movlw   ' '
000750 EC?? F???      00946         call    w_char
000754 0E55           00947         movlw   'U'
000756 EC?? F???      00948         call    w_char
00075A 0E70           00949         movlw   'p'
00075C EC?? F???      00950         call    w_char
000760 0E20           00951         movlw   ' '
000762 EC?? F???      00952         call    w_char
000766 0E2D           00953         movlw   '-'
000768 EC?? F???      00954         call    w_char
00076C 0E3E           00955         movlw   '>'
00076E EC?? F???      00956         call    w_char
                      00957 
                      00958 
000772 0E54           00959         movlw   84
000774 EC?? F???      00960         call    set_daddr
                      00961 
000778 0E3C           00962         movlw   '<'
00077A EC?? F???      00963         call    w_char
00077E 0E2D           00964         movlw   '-'
000780 EC?? F???      00965         call    w_char
000784 0E20           00966         movlw   ' '
000786 EC?? F???      00967         call    w_char
00078A 0E42           00968         movlw   'B'
00078C EC?? F???      00969         call    w_char
000790 0E61           00970         movlw   'a'
000792 EC?? F???      00971         call    w_char
000796 0E63           00972         movlw   'c'
000798 EC?? F???      00973         call    w_char
00079C 0E6B           00974         movlw   'k'
00079E EC?? F???      00975         call    w_char
0007A2 0E20           00976         movlw   ' '
0007A4 EC?? F???      00977         call    w_char
0007A8 0E20           00978         movlw   ' '
0007AA EC?? F???      00979         call    w_char
0007AE 0E20           00980         movlw   ' '
0007B0 EC?? F???      00981         call    w_char
0007B4 0E20           00982         movlw   ' '
0007B6 EC?? F???      00983         call    w_char
0007BA 0E20           00984         movlw   ' '
0007BC EC?? F???      00985         call    w_char
0007C0 0E20           00986         movlw   ' '
0007C2 EC?? F???      00987         call    w_char
0007C6 0E44           00988         movlw   'D'
0007C8 EC?? F???      00989         call    w_char
0007CC 0E6F           00990         movlw   'o'
0007CE EC?? F???      00991         call    w_char
0007D2 0E77           00992         movlw   'w'
0007D4 EC?? F???      00993         call    w_char
0007D8 0E6E           00994         movlw   'n'
0007DA EC?? F???      00995         call    w_char
0007DE 0E20           00996         movlw   ' '
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0007E0 EC?? F???      00997         call    w_char
0007E4 0E2D           00998         movlw   '-'
0007E6 EC?? F???      00999         call    w_char
0007EA 0E3E           01000         movlw   '>'
0007EC EC?? F???      01001         call    w_char
                      01002 
0007F0 0E40           01003         movlw   64
0007F2 EC?? F???      01004         call    set_daddr
                      01005 
0007F6 0E41           01006         movlw   'A'
0007F8 EC?? F???      01007         call    w_char
0007FC 0E64           01008         movlw   'd'
0007FE EC?? F???      01009         call    w_char
000802 0E72           01010         movlw   'r'
000804 EC?? F???      01011         call    w_char
000808 0E65           01012         movlw   'e'
00080A EC?? F???      01013         call    w_char
00080E 0E73           01014         movlw   's'
000810 EC?? F???      01015         call    w_char
000814 0E73           01016         movlw   's'
000816 EC?? F???      01017         call    w_char
00081A 0E3A           01018         movlw   ':'
00081C EC?? F???      01019         call    w_char
000820 0E20           01020         movlw   ' '
000822 EC?? F???      01021         call    w_char
000826 0E47           01022         movlw   71
000828 6F7B           01023         movwf   temp2
00082A 6B7A           01024         clrf    temp1
00082C 516C           01025         movf    c_iah_addr1,W
00082E 6F72           01026         movwf   divid0
000830 6B73           01027         clrf    divid1
000832 6B74           01028         clrf    divid2
000834 6B75           01029         clrf    divid3
000836 EC?? F???      01030         call    printW
00083A 0E2E           01031         movlw   '.'
00083C EC?? F???      01032         call    w_char
000840 517A           01033         movf    temp1,W
000842 277B           01034         addwf   temp2,F
000844 516D           01035         movf    c_iah_addr2,W
000846 6F72           01036         movwf   divid0
000848 6B73           01037         clrf    divid1
00084A 6B74           01038         clrf    divid2
00084C 6B75           01039         clrf    divid3
00084E EC?? F???      01040         call    printW
                      01041 
000852 0E50           01042         movlw   80
000854 EC?? F???      01043         call    set_daddr
000858 0E58           01044         movlw   'X'
00085A EC?? F???      01045         call    w_char
00085E 0E20           01046         movlw   ' '
000860 EC?? F???      01047         call    w_char
000864 0E2D           01048         movlw   '-'
000866 EC?? F???      01049         call    w_char
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00086A 0E3E           01050         movlw   '>'
00086C EC?? F???      01051         call    w_char
                      01052 
                      01053         ; IMPORTANT, thise peace of cewd need to be at the end
000870 A36B           01054         btfss   main_var,1
000872 EF?? F???      01055         goto    screen_4_caddr2
000876 297A           01056         incf    temp1,W ; incf because of the character between the numberes '.'
000878 277B           01057         addwf   temp2,F
00087A                01058 screen_4_caddr2:
00087A 517B           01059         movf    temp2,W
00087C EC?? F???      01060         call    set_daddr
000880 EC?? F???      01061         call    enable_marker
000884 0012           01062         return
                      01063 
                      01064 
000886                01065 screen_3:
000886 0E03           01066         movlw   3
000888 0100           01067         banksel current_s
00088A 6F69           01068         movwf   current_s
                      01069 
00088C EC?? F???      01070         call    clear_screen
                      01071 
000890 0E00           01072         movlw   0
000892 EC?? F???      01073         call    set_daddr
                      01074 
000896 0E20           01075         movlw   ' '
000898 EC?? F???      01076         call    w_char
00089C 0E43           01077         movlw   'C'
00089E EC?? F???      01078         call    w_char
0008A2 0E68           01079         movlw   'h'
0008A4 EC?? F???      01080         call    w_char
0008A8 0E61           01081         movlw   'a'
0008AA EC?? F???      01082         call    w_char
0008AE 0E6E           01083         movlw   'n'
0008B0 EC?? F???      01084         call    w_char
0008B4 0E67           01085         movlw   'g'
0008B6 EC?? F???      01086         call    w_char
0008BA 0E65           01087         movlw   'e'
0008BC EC?? F???      01088         call    w_char
0008C0 0E20           01089         movlw   ' '
0008C2 EC?? F???      01090         call    w_char
0008C6 0E61           01091         movlw   'a'
0008C8 EC?? F???      01092         call    w_char
0008CC 0E64           01093         movlw   'd'
0008CE EC?? F???      01094         call    w_char
0008D2 0E64           01095         movlw   'd'
0008D4 EC?? F???      01096         call    w_char
0008D8 0E72           01097         movlw   'r'
0008DA EC?? F???      01098         call    w_char
0008DE 0E20           01099         movlw   ' '
0008E0 EC?? F???      01100         call    w_char
0008E4 0E61           01101         movlw   'a'
0008E6 EC?? F???      01102         call    w_char
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0008EA 0E74           01103         movlw   't'
0008EC EC?? F???      01104         call    w_char
0008F0 0E20           01105         movlw   ' '
0008F2 EC?? F???      01106         call    w_char
0008F6 0E49           01107         movlw   'I'
0008F8 EC?? F???      01108         call    w_char
0008FC 0E41           01109         movlw   'A'
0008FE EC?? F???      01110         call    w_char
000902 0E48           01111         movlw   'H'
000904 EC?? F???      01112         call    w_char
000908 0E20           01113         movlw   ' '
00090A EC?? F???      01114         call    w_char
                      01115 
00090E 0E54           01116         movlw   84
000910 EC?? F???      01117         call    set_daddr
                      01118 
000914 0E3C           01119         movlw   '<'
000916 EC?? F???      01120         call    w_char
00091A 0E2D           01121         movlw   '-'
00091C EC?? F???      01122         call    w_char
000920 0E20           01123         movlw   ' '
000922 EC?? F???      01124         call    w_char
000926 0E42           01125         movlw   'B'
000928 EC?? F???      01126         call    w_char
00092C 0E61           01127         movlw   'a'
00092E EC?? F???      01128         call    w_char
000932 0E63           01129         movlw   'c'
000934 EC?? F???      01130         call    w_char
000938 0E6B           01131         movlw   'k'
00093A EC?? F???      01132         call    w_char
00093E 0E20           01133         movlw   ' '
000940 EC?? F???      01134         call    w_char
000944 0E20           01135         movlw   ' '
000946 EC?? F???      01136         call    w_char
00094A 0E53           01137         movlw   'S'
00094C EC?? F???      01138         call    w_char
000950 0E65           01139         movlw   'e'
000952 EC?? F???      01140         call    w_char
000956 0E74           01141         movlw   't'
000958 EC?? F???      01142         call    w_char
00095C 0E20           01143         movlw   ' '
00095E EC?? F???      01144         call    w_char
000962 0E61           01145         movlw   'a'
000964 EC?? F???      01146         call    w_char
000968 0E64           01147         movlw   'd'
00096A EC?? F???      01148         call    w_char
00096E 0E64           01149         movlw   'd'
000970 EC?? F???      01150         call    w_char
000974 0E72           01151         movlw   'r'
000976 EC?? F???      01152         call    w_char
00097A 0E20           01153         movlw   ' '
00097C EC?? F???      01154         call    w_char
000980 0E2D           01155         movlw   '-'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000982 EC?? F???      01156         call    w_char
000986 0E3E           01157         movlw   '>'
000988 EC?? F???      01158         call    w_char
                      01159 
00098C 0E40           01160         movlw   64
00098E EC?? F???      01161         call    set_daddr
                      01162 
000992 0E44           01163         movlw   'D'
000994 EC?? F???      01164         call    w_char
000998 0E65           01165         movlw   'e'
00099A EC?? F???      01166         call    w_char
00099E 0E76           01167         movlw   'v'
0009A0 EC?? F???      01168         call    w_char
0009A4 0E69           01169         movlw   'i'
0009A6 EC?? F???      01170         call    w_char
0009AA 0E64           01171         movlw   'd'
0009AC EC?? F???      01172         call    w_char
0009B0 0E3A           01173         movlw   ':'
0009B2 EC?? F???      01174         call    w_char
0009B6 0E20           01175         movlw   ' '
0009B8 EC?? F???      01176         call    w_char
                      01177 
0009BC 6B72           01178         clrf    divid0
0009BE 6B73           01179         clrf    divid1
0009C0 6B74           01180         clrf    divid2
0009C2 6B75           01181         clrf    divid3
0009C4 0E72           01182         movlw   divid0
0009C6 6AEA           01183         clrf    FSR0H
0009C8 0100           01184         banksel rc_counter
0009CA 0E0A           01185         movlw   10
0009CC 5C2E           01186         subwf   rc_counter,W
0009CE 6F79           01187         movwf   temp
0009D0 6F7E           01188         movwf   tmp3
0009D2 6B7C           01189         clrf    tmp1
                      01190 
0009D4                01191 devid_divid:
0009D4 077E           01192         decf    tmp3,F
0009D6 0E5C           01193         movlw   rcframe+8
0009D8 257E           01194         addwf   tmp3,W
0009DA 6EE9           01195         movwf   FSR0L
0009DC 50EF           01196         movf    INDF0,W
0009DE 6F7D           01197         movwf   tmp2
0009E0 0E72           01198         movlw   divid0
0009E2 257C           01199         addwf   tmp1,W
0009E4 6EE9           01200         movwf   FSR0L
0009E6 517D           01201         movf    tmp2,W
0009E8 6EEF           01202         movwf   INDF0
0009EA 2B7C           01203         incf    tmp1,F
0009EC 2F79           01204         decfsz  temp,F
0009EE EF?? F???      01205         goto    devid_divid
0009F2 EC?? F???      01206         call    printW
                      01207 
                      01208 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0009F6 0E14           01209         movlw   20
0009F8 EC?? F???      01210         call    set_daddr
                      01211 
0009FC 0E41           01212         movlw   'A'
0009FE EC?? F???      01213         call    w_char
000A02 0E64           01214         movlw   'd'
000A04 EC?? F???      01215         call    w_char
000A08 0E64           01216         movlw   'd'
000A0A EC?? F???      01217         call    w_char
000A0E 0E72           01218         movlw   'r'
000A10 EC?? F???      01219         call    w_char
000A14 0E3A           01220         movlw   ':'
000A16 EC?? F???      01221         call    w_char
000A1A 0E20           01222         movlw   ' '
000A1C EC?? F???      01223         call    w_char
                      01224         
                      01225 
000A20 5056           01226         movf    rcframe+2,W
000A22 6F6C           01227         movwf   c_iah_addr1
000A24 6F6E           01228         movwf   c_iah_addr1s
000A26 6F72           01229         movwf   divid0
000A28 6B73           01230         clrf    divid1
000A2A 6B74           01231         clrf    divid2
000A2C 6B75           01232         clrf    divid3
000A2E EC?? F???      01233         call    printW
                      01234 
000A32 0E2E           01235         movlw   '.'
000A34 EC?? F???      01236         call    w_char
                      01237 
000A38 5057           01238         movf    rcframe+3,W
000A3A 6F6D           01239         movwf   c_iah_addr2
000A3C 6F6F           01240         movwf   c_iah_addr2s
000A3E 6F72           01241         movwf   divid0
000A40 6B73           01242         clrf    divid1
000A42 6B74           01243         clrf    divid2
000A44 6B75           01244         clrf    divid3
000A46 EC?? F???      01245         call    printW
                      01246 
000A4A 0E20           01247         movlw   ' '
000A4C EC?? F???      01248         call    w_char
                      01249 
000A50 0012           01250         return
                      01251 
000A52                01252 screen_2:
000A52 0E02           01253         movlw   2
000A54 0100           01254         banksel current_s
000A56 6F69           01255         movwf   current_s
                      01256 
000A58 EC?? F???      01257         call    clear_screen
                      01258 
000A5C 0E00           01259         movlw   0
000A5E EC?? F???      01260         call    set_daddr
                      01261 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000A62 0E20           01262         movlw   ' '
000A64 EC?? F???      01263         call    w_char
000A68 0E20           01264         movlw   ' '
000A6A EC?? F???      01265         call    w_char
000A6E 0E54           01266         movlw   'T'
000A70 EC?? F???      01267         call    w_char
000A74 0E65           01268         movlw   'e'
000A76 EC?? F???      01269         call    w_char
000A7A 0E73           01270         movlw   's'
000A7C EC?? F???      01271         call    w_char
000A80 0E74           01272         movlw   't'
000A82 EC?? F???      01273         call    w_char
000A86 0E20           01274         movlw   ' '
000A88 EC?? F???      01275         call    w_char
000A8C 0E6C           01276         movlw   'l'
000A8E EC?? F???      01277         call    w_char
000A92 0E69           01278         movlw   'i'
000A94 EC?? F???      01279         call    w_char
000A98 0E6E           01280         movlw   'n'
000A9A EC?? F???      01281         call    w_char
000A9E 0E65           01282         movlw   'e'
000AA0 EC?? F???      01283         call    w_char
000AA4 0E20           01284         movlw   ' '
000AA6 EC?? F???      01285         call    w_char
000AAA 0E53           01286         movlw   'S'
000AAC EC?? F???      01287         call    w_char
000AB0 0E65           01288         movlw   'e'
000AB2 EC?? F???      01289         call    w_char
000AB6 0E61           01290         movlw   'a'
000AB8 EC?? F???      01291         call    w_char
000ABC 0E72           01292         movlw   'r'
000ABE EC?? F???      01293         call    w_char
000AC2 0E63           01294         movlw   'c'
000AC4 EC?? F???      01295         call    w_char
000AC8 0E68           01296         movlw   'h'
000ACA EC?? F???      01297         call    w_char
000ACE 0E20           01298         movlw   ' '
000AD0 EC?? F???      01299         call    w_char
000AD4 0E20           01300         movlw   ' '
000AD6 EC?? F???      01301         call    w_char
                      01302 
000ADA 0E40           01303         movlw   64
000ADC EC?? F???      01304         call    set_daddr
                      01305 
000AE0 0E3C           01306         movlw   '<'
000AE2 EC?? F???      01307         call    w_char
000AE6 0E2D           01308         movlw   '-'
000AE8 EC?? F???      01309         call    w_char
000AEC 0E20           01310         movlw   ' '
000AEE EC?? F???      01311         call    w_char
000AF2 0E54           01312         movlw   'T'
000AF4 EC?? F???      01313         call    w_char
000AF8 0E65           01314         movlw   'e'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000AFA EC?? F???      01315         call    w_char
000AFE 0E73           01316         movlw   's'
000B00 EC?? F???      01317         call    w_char
000B04 0E74           01318         movlw   't'
000B06 EC?? F???      01319         call    w_char
000B0A 0E20           01320         movlw   ' '
000B0C EC?? F???      01321         call    w_char
000B10 0E61           01322         movlw   'a'
000B12 EC?? F???      01323         call    w_char
000B16 0E67           01324         movlw   'g'
000B18 EC?? F???      01325         call    w_char
000B1C 0E61           01326         movlw   'a'
000B1E EC?? F???      01327         call    w_char
000B22 0E69           01328         movlw   'i'
000B24 EC?? F???      01329         call    w_char
000B28 0E6E           01330         movlw   'n'
000B2A EC?? F???      01331         call    w_char
000B2E 0E20           01332         movlw   ' '
                      01333 
000B30 0E54           01334         movlw   84
000B32 EC?? F???      01335         call    set_daddr
                      01336 
000B36 0E3C           01337         movlw   '<'
000B38 EC?? F???      01338         call    w_char
000B3C 0E2D           01339         movlw   '-'
000B3E EC?? F???      01340         call    w_char
000B42 0E20           01341         movlw   ' '
000B44 EC?? F???      01342         call    w_char
000B48 0E42           01343         movlw   'B'
000B4A EC?? F???      01344         call    w_char
000B4E 0E61           01345         movlw   'a'
000B50 EC?? F???      01346         call    w_char
000B54 0E63           01347         movlw   'c'
000B56 EC?? F???      01348         call    w_char
000B5A 0E6B           01349         movlw   'k'
000B5C EC?? F???      01350         call    w_char
000B60 0E20           01351         movlw   ' '
000B62 EC?? F???      01352         call    w_char
000B66 0E20           01353         movlw   ' '
000B68 EC?? F???      01354         call    w_char
000B6C 0E20           01355         movlw   ' '
000B6E EC?? F???      01356         call    w_char
000B72 0E20           01357         movlw   ' '
000B74 EC?? F???      01358         call    w_char
000B78 0E20           01359         movlw   ' '
000B7A EC?? F???      01360         call    w_char
000B7E 0E20           01361         movlw   ' '
000B80 EC?? F???      01362         call    w_char
000B84 0E20           01363         movlw   ' '
000B86 EC?? F???      01364         call    w_char
000B8A 0E20           01365         movlw   ' '
000B8C EC?? F???      01366         call    w_char
000B90 0E20           01367         movlw   ' '
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000B92 EC?? F???      01368         call    w_char
000B96 0E20           01369         movlw   ' '
000B98 EC?? F???      01370         call    w_char
000B9C 0E20           01371         movlw   ' '
000B9E EC?? F???      01372         call    w_char
000BA2 0E20           01373         movlw   ' '
000BA4 EC?? F???      01374         call    w_char
000BA8 0E20           01375         movlw   ' '
000BAA EC?? F???      01376         call    w_char
                      01377 
000BAE 0E14           01378         movlw   20
000BB0 EC?? F???      01379         call    set_daddr
                      01380 
000BB4 0E53           01381         movlw   'S'
000BB6 EC?? F???      01382         call    w_char
000BBA 0E65           01383         movlw   'e'
000BBC EC?? F???      01384         call    w_char
000BC0 0E61           01385         movlw   'a'
000BC2 EC?? F???      01386         call    w_char
000BC6 0E72           01387         movlw   'r'
000BC8 EC?? F???      01388         call    w_char
000BCC 0E63           01389         movlw   'c'
000BCE EC?? F???      01390         call    w_char
000BD2 0E68           01391         movlw   'h'
000BD4 EC?? F???      01392         call    w_char
000BD8 0E69           01393         movlw   'i'
000BDA EC?? F???      01394         call    w_char
000BDE 0E6E           01395         movlw   'n'
000BE0 EC?? F???      01396         call    w_char
000BE4 0E67           01397         movlw   'g'
000BE6 EC?? F???      01398         call    w_char
                      01399 
000BEA 882D           01400         bsf     rc_listen,4  ; Do not send "is occupied response" to the 0x01
000BEC 802D           01401         bsf     rc_listen,0
                      01402 
000BEE 0E09           01403         movlw   9
000BF0 6E3C           01404         movwf   framelen
000BF2 0EFF           01405         movlw   0xFF
000BF4 6E3F           01406         movwf   txframe
                      01407         ;; 0xff broadcast dst adress
000BF6 0EFF           01408         movlw   0xFF
000BF8 6E40           01409         movwf   txframe+1
                      01410         ;; * my own src adress
000BFA 5034           01411         movf    adress1, W
000BFC 6E41           01412         movwf   txframe+2
                      01413         ;; * my own src adress
000BFE 5035           01414         movf    adress2, W
000C00 6E42           01415         movwf   txframe+3
                      01416         ;; 0x03 control bit
000C02 0E03           01417         movlw   0x03
000C04 6E43           01418         movwf   txframe+4
                      01419         ;; 0x01 protocoll
000C06 0E01           01420         movlw   0x01
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000C08 6E44           01421         movwf   txframe+5
                      01422         ;; Data
000C0A 0E01           01423         movlw   0x01
000C0C 6E45           01424         movwf   txframe+6
                      01425         ;; Padding bit
000C0E 0E00           01426         movlw   0x00
000C10 6E46           01427         movwf   txframe+7
                      01428 
000C12 EC?? F???      01429         call    txdo
                      01430 
000C16 0E2E           01431         movlw   '.'
000C18 EC?? F???      01432         call    w_char
                      01433 
000C1C 0EFF           01434         movlw   255
000C1E EC?? F???      01435         call    Delay
                      01436 
000C22 A02D           01437         btfss   rc_listen,0
000C24 EF?? F???      01438         goto    screen_2_live
                      01439 
000C28 0E2E           01440         movlw   '.'
000C2A EC?? F???      01441         call    w_char
                      01442 
000C2E 0EFF           01443         movlw   255
000C30 EC?? F???      01444         call    Delay
                      01445 
000C34 A02D           01446         btfss   rc_listen,0
000C36 EF?? F???      01447         goto    screen_2_live
                      01448 
000C3A 0E2E           01449         movlw   '.'
000C3C EC?? F???      01450         call    w_char
                      01451 
000C40 0EFF           01452         movlw   255
000C42 EC?? F???      01453         call    Delay
                      01454 
000C46 A02D           01455         btfss   rc_listen,0
000C48 EF?? F???      01456         goto    screen_2_live
                      01457 
000C4C 0E2E           01458         movlw   '.'
000C4E EC?? F???      01459         call    w_char
                      01460 
000C52 0EFF           01461         movlw   255
000C54 EC?? F???      01462         call    Delay
                      01463 
000C58 A02D           01464         btfss   rc_listen,0
000C5A EF?? F???      01465         goto    screen_2_live
000C5E EF?? F???      01466         goto    screen_2_broken
                      01467 
000C62                01468 screen_2_live:
000C62 0E14           01469         movlw   20
000C64 EC?? F???      01470         call    set_daddr
                      01471 
000C68 0E53           01472         movlw   'S'
000C6A EC?? F???      01473         call    w_char
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000C6E 0E75           01474         movlw   'u'
000C70 EC?? F???      01475         call    w_char
000C74 0E63           01476         movlw   'c'
000C76 EC?? F???      01477         call    w_char
000C7A 0E63           01478         movlw   'c'
000C7C EC?? F???      01479         call    w_char
000C80 0E65           01480         movlw   'e'
000C82 EC?? F???      01481         call    w_char
000C86 0E73           01482         movlw   's'
000C88 EC?? F???      01483         call    w_char
000C8C 0E73           01484         movlw   's'
000C8E EC?? F???      01485         call    w_char
000C92 0E21           01486         movlw   '!'
000C94 EC?? F???      01487         call    w_char
000C98 0E20           01488         movlw   ' '
000C9A EC?? F???      01489         call    w_char
000C9E 0E20           01490         movlw   ' '
000CA0 EC?? F???      01491         call    w_char
000CA4 0E20           01492         movlw   ' '
000CA6 EC?? F???      01493         call    w_char
000CAA 0E20           01494         movlw   ' '
000CAC EC?? F???      01495         call    w_char
000CB0 0E20           01496         movlw   ' '
000CB2 EC?? F???      01497         call    w_char
000CB6 0E20           01498         movlw   ' '
000CB8 EC?? F???      01499         call    w_char
000CBC 0012           01500         return
                      01501 
000CBE                01502 screen_2_broken:
000CBE 0E14           01503         movlw   20
000CC0 EC?? F???      01504         call    set_daddr
                      01505 
000CC4 0E4C           01506         movlw   'L'
000CC6 EC?? F???      01507         call    w_char
000CCA 0E69           01508         movlw   'i'
000CCC EC?? F???      01509         call    w_char
000CD0 0E6E           01510         movlw   'n'
000CD2 EC?? F???      01511         call    w_char
000CD6 0E65           01512         movlw   'e'
000CD8 EC?? F???      01513         call    w_char
000CDC 0E20           01514         movlw   ' '
000CDE EC?? F???      01515         call    w_char
000CE2 0E73           01516         movlw   's'
000CE4 EC?? F???      01517         call    w_char
000CE8 0E65           01518         movlw   'e'
000CEA EC?? F???      01519         call    w_char
000CEE 0E65           01520         movlw   'e'
000CF0 EC?? F???      01521         call    w_char
000CF4 0E6D           01522         movlw   'm'
000CF6 EC?? F???      01523         call    w_char
000CFA 0E73           01524         movlw   's'
000CFC EC?? F???      01525         call    w_char
000D00 0E20           01526         movlw   ' '
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000D02 EC?? F???      01527         call    w_char
000D06 0E62           01528         movlw   'b'
000D08 EC?? F???      01529         call    w_char
000D0C 0E72           01530         movlw   'r'
000D0E EC?? F???      01531         call    w_char
000D12 0E6F           01532         movlw   'o'
000D14 EC?? F???      01533         call    w_char
000D18 0E6B           01534         movlw   'k'
000D1A EC?? F???      01535         call    w_char
000D1E 0E65           01536         movlw   'e'
000D20 EC?? F???      01537         call    w_char
000D24 0E6E           01538         movlw   'n'
000D26 EC?? F???      01539         call    w_char
                      01540 
000D2A 0012           01541         return
                      01542 
000D2C                01543 screen_1:
000D2C 0E01           01544         movlw   1
000D2E 0100           01545         banksel current_s
000D30 6F69           01546         movwf   current_s
                      01547 
000D32 EC?? F???      01548         call    clear_screen
                      01549 
000D36 0E00           01550         movlw   0
000D38 EC?? F???      01551         call    set_daddr
                      01552 
000D3C 0E20           01553         movlw   ' '
000D3E EC?? F???      01554         call    w_char
000D42 0E53           01555         movlw   'S'
000D44 EC?? F???      01556         call    w_char
000D48 0E65           01557         movlw   'e'
000D4A EC?? F???      01558         call    w_char
000D4E 0E74           01559         movlw   't'
000D50 EC?? F???      01560         call    w_char
000D54 0E20           01561         movlw   ' '
000D56 EC?? F???      01562         call    w_char
000D5A 0E61           01563         movlw   'a'
000D5C EC?? F???      01564         call    w_char
000D60 0E64           01565         movlw   'd'
000D62 EC?? F???      01566         call    w_char
000D66 0E64           01567         movlw   'd'
000D68 EC?? F???      01568         call    w_char
000D6C 0E72           01569         movlw   'r'
000D6E EC?? F???      01570         call    w_char
000D72 0E20           01571         movlw   ' '
000D74 EC?? F???      01572         call    w_char
000D78 0E66           01573         movlw   'f'
000D7A EC?? F???      01574         call    w_char
000D7E 0E72           01575         movlw   'r'
000D80 EC?? F???      01576         call    w_char
000D84 0E6F           01577         movlw   'o'
000D86 EC?? F???      01578         call    w_char
000D8A 0E6D           01579         movlw   'm'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000D8C EC?? F???      01580         call    w_char
000D90 0E20           01581         movlw   ' '
000D92 EC?? F???      01582         call    w_char
000D96 0E49           01583         movlw   'I'
000D98 EC?? F???      01584         call    w_char
000D9C 0E41           01585         movlw   'A'
000D9E EC?? F???      01586         call    w_char
000DA2 0E48           01587         movlw   'H'
000DA4 EC?? F???      01588         call    w_char
                      01589 
000DA8 0E14           01590         movlw   20
000DAA EC?? F???      01591         call    set_daddr
                      01592 
000DAE 0E57           01593         movlw   'W'
000DB0 EC?? F???      01594         call    w_char
000DB4 0E61           01595         movlw   'a'
000DB6 EC?? F???      01596         call    w_char
000DBA 0E69           01597         movlw   'i'
000DBC EC?? F???      01598         call    w_char
000DC0 0E74           01599         movlw   't'
000DC2 EC?? F???      01600         call    w_char
000DC6 0E69           01601         movlw   'i'
000DC8 EC?? F???      01602         call    w_char
000DCC 0E6E           01603         movlw   'n'
000DCE EC?? F???      01604         call    w_char
000DD2 0E67           01605         movlw   'g'
000DD4 EC?? F???      01606         call    w_char
000DD8 0E20           01607         movlw   ' '
000DDA EC?? F???      01608         call    w_char
000DDE 0E66           01609         movlw   'f'
000DE0 EC?? F???      01610         call    w_char
000DE4 0E6F           01611         movlw   'o'
000DE6 EC?? F???      01612         call    w_char
000DEA 0E72           01613         movlw   'r'
000DEC EC?? F???      01614         call    w_char
000DF0 0E20           01615         movlw   ' '
000DF2 EC?? F???      01616         call    w_char
000DF6 0E49           01617         movlw   'I'
000DF8 EC?? F???      01618         call    w_char
000DFC 0E41           01619         movlw   'A'
000DFE EC?? F???      01620         call    w_char
000E02 0E48           01621         movlw   'H'
000E04 EC?? F???      01622         call    w_char
000E08 0E20           01623         movlw   ' '
000E0A EC?? F???      01624         call    w_char
000E0E 0E20           01625         movlw   ' '
000E10 EC?? F???      01626         call    w_char
000E14 0E20           01627         movlw   ' '
000E16 EC?? F???      01628         call    w_char
000E1A 0E20           01629         movlw   ' '
000E1C EC?? F???      01630         call    w_char
000E20 0E20           01631         movlw   ' '
000E22 EC?? F???      01632         call    w_char
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01633 
000E26 0E54           01634         movlw   84
000E28 EC?? F???      01635         call    set_daddr
                      01636 
000E2C 0E3C           01637         movlw   '<'
000E2E EC?? F???      01638         call    w_char
000E32 0E2D           01639         movlw   '-'
000E34 EC?? F???      01640         call    w_char
000E38 0E20           01641         movlw   ' '
000E3A EC?? F???      01642         call    w_char
000E3E 0E42           01643         movlw   'B'
000E40 EC?? F???      01644         call    w_char
000E44 0E61           01645         movlw   'a'
000E46 EC?? F???      01646         call    w_char
000E4A 0E63           01647         movlw   'c'
000E4C EC?? F???      01648         call    w_char
000E50 0E6B           01649         movlw   'k'
000E52 EC?? F???      01650         call    w_char
000E56 0E20           01651         movlw   ' '
000E58 EC?? F???      01652         call    w_char
000E5C 0E20           01653         movlw   ' '
000E5E EC?? F???      01654         call    w_char
000E62 0E20           01655         movlw   ' '
000E64 EC?? F???      01656         call    w_char
000E68 0E20           01657         movlw   ' '
000E6A EC?? F???      01658         call    w_char
000E6E 0E20           01659         movlw   ' '
000E70 EC?? F???      01660         call    w_char
000E74 0E20           01661         movlw   ' '
000E76 EC?? F???      01662         call    w_char
000E7A 0E20           01663         movlw   ' '
000E7C EC?? F???      01664         call    w_char
000E80 0E20           01665         movlw   ' '
000E82 EC?? F???      01666         call    w_char
000E86 0E20           01667         movlw   ' '
000E88 EC?? F???      01668         call    w_char
000E8C 0E20           01669         movlw   ' '
000E8E EC?? F???      01670         call    w_char
000E92 0E20           01671         movlw   ' '
000E94 EC?? F???      01672         call    w_char
000E98 0E20           01673         movlw   ' '
000E9A EC?? F???      01674         call    w_char
000E9E 0E20           01675         movlw   ' '
000EA0 EC?? F???      01676         call    w_char
                      01677 
000EA4 816B           01678         bsf     main_var,0
000EA6 0012           01679         return
                      01680 
000EA8                01681 screen_0: ; Init screen
000EA8 0E00           01682         movlw   0
000EAA 0100           01683         banksel current_s
000EAC 6F69           01684         movwf   current_s
                      01685 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000EAE EC?? F???      01686         call    clear_screen
                      01687 
000EB2 0E00           01688         movlw   0
000EB4 EC?? F???      01689         call    set_daddr
000EB8 0E20           01690         movlw   ' '
000EBA EC?? F???      01691         call    w_char
000EBE 0E53           01692         movlw   'S'
000EC0 EC?? F???      01693         call    w_char
000EC4 0E70           01694         movlw   'p'
000EC6 EC?? F???      01695         call    w_char
000ECA 0E65           01696         movlw   'e'
000ECC EC?? F???      01697         call    w_char
000ED0 0E65           01698         movlw   'e'
000ED2 EC?? F???      01699         call    w_char
000ED6 0E64           01700         movlw   'd'
000ED8 EC?? F???      01701         call    w_char
000EDC 0E62           01702         movlw   'b'
000EDE EC?? F???      01703         call    w_char
000EE2 0E75           01704         movlw   'u'
000EE4 EC?? F???      01705         call    w_char
000EE8 0E73           01706         movlw   's'
000EEA EC?? F???      01707         call    w_char
000EEE 0E20           01708         movlw   ' '
000EF0 EC?? F???      01709         call    w_char
000EF4 0E70           01710         movlw   'p'
000EF6 EC?? F???      01711         call    w_char
000EFA 0E6F           01712         movlw   'o'
000EFC EC?? F???      01713         call    w_char
000F00 0E63           01714         movlw   'c'
000F02 EC?? F???      01715         call    w_char
000F06 0E6B           01716         movlw   'k'
000F08 EC?? F???      01717         call    w_char
000F0C 0E65           01718         movlw   'e'
000F0E EC?? F???      01719         call    w_char
000F12 0E74           01720         movlw   't'
000F14 EC?? F???      01721         call    w_char
000F18 0E20           01722         movlw   ' '
000F1A EC?? F???      01723         call    w_char
000F1E 0E55           01724         movlw   'U'
000F20 EC?? F???      01725         call    w_char
000F24 0E49           01726         movlw   'I'
000F26 EC?? F???      01727         call    w_char
                      01728 
000F2A 0E14           01729         movlw   20
000F2C EC?? F???      01730         call    set_daddr
                      01731 
000F30 0E3C           01732         movlw   '<'
000F32 EC?? F???      01733         call    w_char
000F36 0E2D           01734         movlw   '-'
000F38 EC?? F???      01735         call    w_char
000F3C 0E20           01736         movlw   ' '
000F3E EC?? F???      01737         call    w_char
000F42 0E53           01738         movlw   'S'
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000F44 EC?? F???      01739         call    w_char
000F48 0E65           01740         movlw   'e'
000F4A EC?? F???      01741         call    w_char
000F4E 0E74           01742         movlw   't'
000F50 EC?? F???      01743         call    w_char
000F54 0E20           01744         movlw   ' '
000F56 EC?? F???      01745         call    w_char
000F5A 0E61           01746         movlw   'a'
000F5C EC?? F???      01747         call    w_char
000F60 0E64           01748         movlw   'd'
000F62 EC?? F???      01749         call    w_char
000F66 0E64           01750         movlw   'd'
000F68 EC?? F???      01751         call    w_char
000F6C 0E72           01752         movlw   'r'
000F6E EC?? F???      01753         call    w_char
000F72 0E20           01754         movlw   ' '
000F74 EC?? F???      01755         call    w_char
000F78 0E66           01756         movlw   'f'
000F7A EC?? F???      01757         call    w_char
000F7E 0E72           01758         movlw   'r'
000F80 EC?? F???      01759         call    w_char
000F84 0E6F           01760         movlw   'o'
000F86 EC?? F???      01761         call    w_char
000F8A 0E6D           01762         movlw   'm'
000F8C EC?? F???      01763         call    w_char
000F90 0E20           01764         movlw   ' '
000F92 EC?? F???      01765         call    w_char
000F96 0E49           01766         movlw   'I'
000F98 EC?? F???      01767         call    w_char
000F9C 0E41           01768         movlw   'A'
000F9E EC?? F???      01769         call    w_char
000FA2 0E48           01770         movlw   'H'
000FA4 EC?? F???      01771         call    w_char
                      01772 
000FA8 0E54           01773         movlw   84
000FAA EC?? F???      01774         call    set_daddr
                      01775 
000FAE 0E3C           01776         movlw   '<'
000FB0 EC?? F???      01777         call    w_char
000FB4 0E2D           01778         movlw   '-'
000FB6 EC?? F???      01779         call    w_char
000FBA 0E20           01780         movlw   ' '
000FBC EC?? F???      01781         call    w_char
000FC0 0E54           01782         movlw   'T'
000FC2 EC?? F???      01783         call    w_char
000FC6 0E65           01784         movlw   'e'
000FC8 EC?? F???      01785         call    w_char
000FCC 0E73           01786         movlw   's'
000FCE EC?? F???      01787         call    w_char
000FD2 0E74           01788         movlw   't'
000FD4 EC?? F???      01789         call    w_char
000FD8 0E20           01790         movlw   ' '
000FDA EC?? F???      01791         call    w_char
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000FDE 0E6C           01792         movlw   'l'
000FE0 EC?? F???      01793         call    w_char
000FE4 0E69           01794         movlw   'i'
000FE6 EC?? F???      01795         call    w_char
000FEA 0E6E           01796         movlw   'n'
000FEC EC?? F???      01797         call    w_char
000FF0 0E65           01798         movlw   'e'
000FF2 EC?? F???      01799         call    w_char
000FF6 0E20           01800         movlw   ' '
000FF8 EC?? F???      01801         call    w_char
000FFC 0E53           01802         movlw   'S'
000FFE EC?? F???      01803         call    w_char
001002 0E65           01804         movlw   'e'
001004 EC?? F???      01805         call    w_char
001008 0E61           01806         movlw   'a'
00100A EC?? F???      01807         call    w_char
00100E 0E72           01808         movlw   'r'
001010 EC?? F???      01809         call    w_char
001014 0E63           01810         movlw   'c'
001016 EC?? F???      01811         call    w_char
00101A 0E68           01812         movlw   'h'
00101C EC?? F???      01813         call    w_char
001020 0E20           01814         movlw   ' '
001022 EC?? F???      01815         call    w_char
                      01816 
                      01817 ;        call    write_hello
                      01818 ;        movlw   64
                      01819 ;        call    set_daddr
                      01820 ;        call    write_hello
                      01821 ;        movlw   84
                      01822 ;        call    set_daddr
                      01823 ;        call    write_hello
                      01824 
001026 0012           01825         return
                      01826 
001028                01827 byte_to_str:
001028 6F6C           01828         movwf   c_iah_addr1
00102A 6B72           01829         clrf    divid0
00102C 6B73           01830         clrf    divid1
00102E 6B74           01831         clrf    divid2
001030 6B75           01832         clrf    divid3
001032 6F72           01833         movwf   divid0
001034 0012           01834         return
                      01835 ; Resume here!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
                      01836 
001036                01837 set_daddr:
001036 6E20           01838         movwf   d1
001038 8E20           01839         bsf     d1,7
00103A 5020           01840         movf    d1,W
00103C EC?? F???      01841         call    w_ins
001040 0012           01842         return
                      01843 
001042                01844 clear_screen:
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001042 0E01           01845         movlw   b'00000001'
001044 EC?? F???      01846         call    w_ins
001048 0E96           01847         movlw   150
00104A EC?? F???      01848         call    d10ms
00104E 0012           01849         return
                      01850 
001050                01851 enable_marker:
001050 0E0F           01852         movlw   b'00001111' ; Display on | Cursor | Blink
001052 EC?? F???      01853         call    w_ins
001056 0E96           01854         movlw   150
001058 EC?? F???      01855         call    d10ms
00105C 0012           01856         return
                      01857 
00105E                01858 disable_marker:
00105E 0E0C           01859         movlw   b'00001100' ; Display on | Cursor | Blink
001060 EC?? F???      01860         call    w_ins
001064 0E96           01861         movlw   150
001066 EC?? F???      01862         call    d10ms
00106A 0012           01863         return
                      01864 
00106C                01865 start_display:
00106C 6A82           01866         clrf    PORTC
00106E 6A83           01867         clrf    PORTD
001070 0E3F           01868         movlw   b'00111111'
001072 EC?? F???      01869         call    w_ins
001076 0E0C           01870         movlw   b'00001100' ; Display on | Cursor | Blink
001078 EC?? F???      01871         call    w_ins
00107C 0E01           01872         movlw   b'00000001'
00107E EC?? F???      01873         call    w_ins
001082 0E02           01874         movlw   b'00000010'
001084 EC?? F???      01875         call    w_ins
001088 0E06           01876         movlw   b'00000110'
00108A EC?? F???      01877         call    w_ins
00108E 0E96           01878         movlw   150
001090 EC?? F???      01879         call    d10ms
001094 0012           01880         return
                      01881 
001096                01882 w_ins:
001096 9282           01883         bcf     PORTC,1
001098 EF?? F???      01884         goto    w_lcd
00109C                01885 w_char:
00109C 8282           01886         bsf     PORTC,1
00109E                01887 w_lcd:
00109E 6E83           01888         movwf   PORTD
0010A0 8082           01889         bsf     PORTC,0
0010A2 0E0A           01890         movlw   10
0010A4 EC?? F???      01891         call    d10ms
0010A8 9082           01892         bcf     PORTC,0
0010AA 0E0B           01893         movlw   11
0010AC EC?? F???      01894         call    d10ms
0010B0 0012           01895         return
                      01896 
0010B2                01897 divide:
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0010B2 0E20           01898        movlw 32      ; 32-bit divide by 16-bit
0010B4 6F78           01899        movwf bitcnt
0010B6 6B77           01900        clrf remdrH   ; Clear remainder
0010B8 6B76           01901        clrf remdrL
                      01902 
0010BA                01903 dvloop:
0010BA 90D8           01904        bcf  STATUS,C          ; Set quotient bit to 0
                      01905                      ; Shift left dividend and quotient
0010BC 3772           01906        rlcf divid0    ; lsb
0010BE 3773           01907        rlcf divid1
0010C0 3774           01908        rlcf divid2
0010C2 3775           01909        rlcf divid3    ; lsb into carry
0010C4 3776           01910        rlcf remdrL    ; and then into partial remainder
0010C6 3777           01911        rlcf remdrH
                      01912 
0010C8 B0D8           01913        btfsc STATUS,C         ; Check for overflow
0010CA EF?? F???      01914        goto subd
0010CE 5171           01915        movf divisH,W  ; Compare partial remainder and divisor
0010D0 5D77           01916        subwf remdrH,w
0010D2 A4D8           01917        btfss STATUS,Z
0010D4 EF?? F???      01918        goto testgt   ; Not equal so test if remdrH is greater
0010D8 5170           01919        movf divisL,W  ; High bytes are equal, compare low bytes
0010DA 5D76           01920        subwf remdrL,w
0010DC                01921 testgt:
                      01922 
0010DC A0D8           01923        btfss STATUS,C          ; Carry set if remdr >= divis
0010DE EF?? F???      01924        goto remrlt
                      01925 
0010E2                01926 subd:
0010E2 5170           01927        movf divisL,W  ; Subtract divisor from partial remainder
0010E4 5F76           01928        subwf remdrL
0010E6 A0D8           01929        btfss STATUS,C ; Test for borrow
                      01930 
0010E8 0777           01931        decf remdrH   ; Subtract borrow
0010EA 5171           01932        movf divisH,W
0010EC 5F77           01933        subwf remdrH
0010EE 8172           01934        bsf divid0,0  ; Set quotient bit to 1
                      01935                      ; Quotient replaces dividend which is lost
0010F0                01936 remrlt:
0010F0 2F78           01937        decfsz bitcnt
0010F2 EF?? F???      01938        goto dvloop
0010F6 0012           01939        return
                      01940 
                      01941 
0010F8                01942 d10ms:
                      01943 
                      01944                         ;19998 cycles
0010F8 6E22           01945         movwf   d3
0010FA                01946 d10ms__:
0010FA 0E8F           01947         movlw   0x8F
0010FC 6E20           01948         movwf   d1
0010FE 0E02           01949         movlw   0x02
001100 6E21           01950         movwf   d2
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

001102                01951 d10ms_:
001102 2E20           01952         decfsz  d1, f
001104 EF?? F???      01953         goto    $+2
001108 2E21           01954         decfsz  d2, f
00110A EF?? F???      01955         goto    d10ms_
00110E 2E22           01956         decfsz  d3, f
001110 EF?? F???      01957         goto    d10ms__
001114 0012           01958         return
                      01959 
001116                01960 d1s:
001116 0E03           01961         movlw   0x03
001118 6E20           01962         movwf   d1
00111A 0E18           01963         movlw   0x18
00111C 6E21           01964         movwf   d2
00111E 0E02           01965         movlw   0x02
001120 6E22           01966         movwf   d3
001122                01967 d1s_0:
001122 2E20           01968         decfsz  d1, f
001124 EF?? F???      01969         goto    d1s_0
001128 2E21           01970         decfsz  d2, f
00112A EF?? F???      01971         goto    d1s_0
00112E 2E22           01972         decfsz  d3, f
001130 EF?? F???      01973         goto    d1s_0
001134 0012           01974         return
                      01975 
                      01976 
                      01977 
                      01978 #include "../SpeedBus.PIC.Lib.X/speedlib_main.asm"
                      00001 ;#include "/usr/share/gputils/header/p16f690.inc"
                      00002 ;            errorlevel -302
                      00003 
                      00004 ;
                      00005 ;   #define     REC_CUSTOM_JUMP         custom_command_handler ; This is the name of the command to use,
                             if it is a custom command. like, "jump to this statment if it is a custom command"
                      00006 ;   #define     CUSTOM_INTERRUPT        c_intserv              ; NOTE: When use this define, remember th
                            at the jumpback, to the ordinary interupthandler, need to be "ci_restore", if the interupt does 
                      00007 ;
                      00008 ;
                      00009 ; Using two device id:s, maybe not predefined, so...
                      00010 ; The definition of thease bytes should not be done in the lib file, but in the main asm file, so difren
                            t deviceid:s on difrent sources can be used.
                      00011 
                      00012 #ifndef DEV_ID1
                      00013 #define DEV_ID1 0
                      00014 #endif
                      00015 #ifndef DEV_ID2
                      00016 #define DEV_ID2 0
                      00017 #endif
                      00018 
                      00019 #ifndef FSR
                      00020 #define FSR FSR1L
                      00021 #endif
                      00022 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00023 #ifndef INDF
                      00024 #define INDF INDF1
                      00025 #endif
                      00026 
                      00027 #ifndef EEDAT
                      00028 #define EEDAT EEDATA
                      00029 #endif
                      00030 
                      00031 #define SPEEDLIB_RESPONSE_DELAY 9
                      00032 
                      00033         radix dec
                      00034 ; IMPORTANT, do NOT change any of the varables down here, to a new bank, because
                      00035 ; the banksel instructions are configured, as all the varables bellow are in the
                      00036 ; same bank. As they should be.
                      00037 #define     USER_VARIABLE_SPACE         0x68    ; 0x66 but added two, just in case
                      00038         cblock  0x20
  00000020            00039              d1                 ; Define three file registers for the
  00000021            00040              d2                 ; delay loop
  00000022            00041              d3
  00000023            00042              d4
  00000024            00043              tmp_W
  00000025            00044              tmp_STATUS
  00000026            00045              tmp_PCLATH
  00000027            00046              d1_tmp
  00000028            00047              d2_tmp
  00000029            00048              d3_tmp
  0000002A            00049              rand
  0000002B            00050              loop1              ; Loop mem 1
  0000002C            00051              loop2              ; Loop mem 2
  0000002D            00052              rc_listen          ; |X-------|b7 = NoNE
                      00053                                 ; |-X------|b6 = NoNE
                      00054                                 ; |--X-----|b5 = NoNE
                      00055                                 ; |---X----|b4 = This bit specifies, that when reciving an 0x01, destion
                            ated for ME, do not send a "is ocupied package". This is good if you want to "search for units"
                      00056                                 ; |----X---|b3 = This bit got set if the device recive a usual response 
                            package (0x00)
                      00057                                 ; |-----X--|b2 = This is an internal function for the recsave rutine, so
                             the cewd know that following byte is escaped.
                      00058                                 ; |------X-|b1 = If you set this bit to 1 the cewd will handle the byte 
                            as loopback, and if it dosent match the byte in rc_nocoll
                      00059                                 ; |-------X|b0 = This bit got set if the device recive an answer to a "c
                            heck_addr" package, to confirm that the adress is ocupied
  0000002E            00060              rc_counter         ; RC framelen
  0000002F            00061              rc_gotflag         ; Set to 1 if it "got a flag"
  00000030            00062              rc_nocoll          ; Use this to confim that no collission has ocurred
  00000031            00063              rc_add_byte        ; recsave_add temporary argument
  00000032            00064              rsp_adress1        ; The response adress at the bus
  00000033            00065              rsp_adress2        ; The response adress at the bus
  00000034            00066              adress1            ; The adress at the bus
  00000035            00067              adress2            ; The adress at the bus
  00000036            00068              speedlib_config    ; |X-------|b7 = NoNE
                      00069                                 ; |-X------|b6 = NoNE
                      00070                                 ; |--X-----|b5 = NoNE
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00071                                 ; |---X----|b4 = NoNE
                      00072                                 ; |----X---|b3 = NoNe
                      00073                                 ; |-----X--|b2 = NoNe
                      00074                                 ; |------X-|b1 = Set this bit 1 if adress is stamped.
                      00075                                 ; |-------X|b0 = On, Off this bit, if you want to make the device check 
                            the adress on startup.
  00000037            00076              speedlib_main      ; |X-------|b7 = NoNE
                      00077                                 ; |-X------|b6 = NoNE
                      00078                                 ; |--X-----|b5 = NoNE
                      00079                                 ; |---X----|b4 = NoNE
                      00080                                 ; |----X---|b3 = NoNe
                      00081                                 ; |-----X--|b2 = If this bit got set, the cewd will send a response pack
                            age when returning to restore
                      00082                                 ; |------X-|b1 = This bit should be set, if the device has sent an packa
                            ge, that should be responde to
                      00083                                 ; |-------X|b0 = This bit, is SET when an interupt has occured. If you s
                            et this to zero before youre rutine, and check the bit after, you will se if an interupt has ocu
  00000038            00084              crc0
  00000039            00085              crc1
  0000003A            00086              crcloop
  0000003B            00087              crctmp
  0000003C            00088              framelen           ; TX framelen
  0000003D            00089              txtmp              ; temporary before sending
  0000003E            00090              txreturn           ; Hardcoded return, if nessesary(in interupts)
  0000003F            00091              txframe, tx1, tx2, tx3, tx4, tx5, tx6, tx7, tx8, tx9, tx10 ; Current package limit, 20B
  0000004A            00092              tx11, tx12, tx13, tx14, tx15, tx16, tx17, tx18, tx19, tx20
  00000054            00093              rcframe, rc1, rc2, rc3, rc4, rc5, rc6, rc7, rc8, rc9, rc10 ; Current package limit, 20B
  0000005F            00094              rc11, rc12, rc13, rc14, rc15, rc16, rc17, rc18, rc19, rc20
                      00095         endc
                      00096         ;; EEPROM
                      00097         ;; 0x00 ; addr1
                      00098         ;; 0x01 ; addr2
                      00099         ;; 0x02 ; Speedbus configuration register
                      00100 
                      00101 .code_page0_ CODE
                      00102 
000000                00103 init_speedlib:
                      00104 #ifndef FSR
                      00105     clrf    FSR1H
                      00106 #endif
                      00107 
                      00108 
                      00109     ;; Preset some values
000000 0100           00110     banksel speedlib_main
000002 9437           00111     bcf     speedlib_main,2
000004 9237           00112     bcf     speedlib_main,1
000006 010F           00113     banksel PORTB
000008 9881           00114     bcf     PORTB,4
00000A 0100           00115     banksel rc_listen
00000C 922D           00116     bcf     rc_listen,1
00000E 982D           00117     bcf     rc_listen,4
                      00118 
                      00119 #ifdef  READ_EEPROM
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00120     ;; Take adress from eeprom, if it is set.
                      00121     movlw   0
                      00122     call    READ_EEPROM
                      00123     banksel adress1
                      00124     movwf   adress1
                      00125     movlw   1
                      00126     call    READ_EEPROM
                      00127     banksel adress2
                      00128     movwf   adress2
                      00129     movlw   2
                      00130     call    READ_EEPROM
                      00131     banksel speedlib_config
                      00132     movwf   speedlib_config
                      00133 #endif
000010 B036           00134     btfsc   speedlib_config,0
                      00135 ;    call    init_checkaddr
                      00136 
                      00137     ; If adress is 0xFFFF, force init_checkaddr
000012 0EFF           00138     movlw       0xFF
000014 0100           00139     banksel     adress1
000016 5C34           00140     subwf       adress1,W
000018 010F           00141     banksel     STATUS
00001A A4D8           00142     btfss       STATUS,Z
00001C EF?? F???      00143     goto        init_speedlib_e
000020 0EFF           00144     movlw       0xFF
000022 0100           00145     banksel     adress2
000024 5C35           00146     subwf       adress2,W
000026 010F           00147     banksel     STATUS
000028 A4D8           00148     btfss       STATUS,Z
00002A EF?? F???      00149     goto        init_speedlib_e
00002E 0100           00150     banksel     adress1
000030 6A34           00151     clrf        adress1
000032 6A35           00152     clrf        adress2
000034 EC?? F???      00153     call        init_checkaddr
                      00154 
000038                00155 init_speedlib_e:
                      00156 
000038 0012           00157     return
                      00158 
00003A                00159 init_checkaddr:
00003A 0E03           00160         movlw   3
00003C 6E2B           00161         movwf   loop1
                      00162         
00003E                00163 init_checkaddr_l:
00003E 0100           00164         banksel framelen
                      00165 
                      00166         ;; Send porta over TX
000040 0E09           00167         movlw   9
000042 6E3C           00168         movwf   framelen
                      00169         ;; * adress
000044 5034           00170         movf    adress1,W
000046 6E3F           00171         movwf   txframe 
                      00172         ;; * adress
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000048 5035           00173         movf    adress2,W
00004A 6E40           00174         movwf   txframe+1
                      00175         ;; 0xff broadcast adress
00004C 0EFF           00176         movlw   0xff
00004E 6E41           00177         movwf   txframe+2
                      00178         ;; 0xff broadcast adress
000050 0EFF           00179         movlw   0xff
000052 6E42           00180         movwf   txframe+3
                      00181         ;; 0x03 control bit
000054 0E03           00182         movlw   0x03
000056 6E43           00183         movwf   txframe+4
                      00184         ;; 0x01 protocoll
000058 0E00           00185         movlw   0x00
00005A 6E44           00186         movwf   txframe+5
                      00187         ;; Data
00005C 0E01           00188         movlw   0x01
00005E 6E45           00189         movwf   txframe+6
                      00190         ;; Padding bit
000060 0E00           00191         movlw   0x00
000062 6E46           00192         movwf   txframe+7
                      00193 
                      00194 
000064 EC?? F???      00195         call    txdo
                      00196 
000068 0100           00197         banksel rc_listen
00006A 802D           00198         bsf     rc_listen,0
00006C 0E0A           00199         movlw   10
00006E EC?? F???      00200         call    Delay
000072 0100           00201         banksel rc_listen
000074 B02D           00202         btfsc   rc_listen,0
000076 EF?? F???      00203         goto    init_checkaddr_not_ocupied
00007A EF?? F???      00204         goto    init_checkaddr_ocupied
                      00205 
00007E                00206 init_checkaddr_not_ocupied:
00007E 0100           00207         banksel loop1
000080 2E2B           00208         decfsz  loop1, f
000082 EF?? F???      00209         goto    init_checkaddr_l
000086 902D           00210         bcf     rc_listen,0     
000088 0012           00211         return
                      00212 
                      00213         
00008A                00214 init_checkaddr_ocupied:
00008A EC?? F???      00215         call    setaddr
00008E 0012           00216         return
                      00217 
000090                00218 setaddr:
000090 0100           00219         banksel adress1
000092 0E00           00220         movlw   0x00
000094 6E34           00221         movwf   adress1
000096 0E00           00222         movlw   0x00
000098 6E35           00223         movwf   adress2
                      00224 
00009A                00225 setaddr1:       
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00009A 0100           00226         banksel adress2
                      00227 
00009C 3E35           00228         incfsz  adress2, f
00009E EF?? F???      00229         goto    setaddr2
                      00230 
0000A2 0E00           00231         movlw   0x00
0000A4 6E2C           00232         movwf   loop2
                      00233 
0000A6 3E34           00234         incfsz  adress1, f
0000A8 EF?? F???      00235         goto    setaddr2
0000AC 0012           00236         return                  ; ALERT!!! Change this to a rutin that show an error that no adress is a
                            vailible (all ~65535 is taken)
                      00237 
0000AE                00238 setaddr2:
                      00239         ;; Send porta over TX
0000AE 0E09           00240         movlw   9
0000B0 6E3C           00241         movwf   framelen
                      00242         ;; * adress
0000B2 5034           00243         movf    adress1,W
0000B4 6E3F           00244         movwf   txframe 
                      00245         ;; * adress
0000B6 5035           00246         movf    adress2,W
0000B8 6E40           00247         movwf   txframe+1
                      00248         ;; 0xff broadcast adress
0000BA 0EFF           00249         movlw   0xff
0000BC 6E41           00250         movwf   txframe+2
                      00251         ;; 0xff broadcast adress
0000BE 0EFF           00252         movlw   0xff
0000C0 6E42           00253         movwf   txframe+3
                      00254         ;; 0x03 control bit
0000C2 0E03           00255         movlw   0x03
0000C4 6E43           00256         movwf   txframe+4
                      00257         ;; 0x01 protocoll
0000C6 0E00           00258         movlw   0x00
0000C8 6E44           00259         movwf   txframe+5
                      00260         ;; Data
0000CA 0E01           00261         movlw   0x01
0000CC 6E45           00262         movwf   txframe+6
                      00263         ;; Padding bit
0000CE 0E00           00264         movlw   0x00
0000D0 6E46           00265         movwf   txframe+7
                      00266 
                      00267 
0000D2 EC?? F???      00268         call    txdo
                      00269 
0000D6 0100           00270         banksel rc_listen
0000D8 802D           00271         bsf     rc_listen,0
0000DA 0E01           00272         movlw   1
0000DC EC?? F???      00273         call    Delay
0000E0 0100           00274         banksel rc_listen
0000E2 B02D           00275         btfsc   rc_listen,0
0000E4 EF?? F???      00276         goto    setaddr_testloop
0000E8 EF?? F???      00277         goto    setaddr1
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00278 
                      00279         
0000EC                00280 setaddr_testloop:               ; Send this rutine another 2 times, to make sure that the previus packet
                             not was droped
0000EC 0100           00281         banksel loop1
0000EE 0E02           00282         movlw   2
0000F0 6E2B           00283         movwf   loop1
0000F2                00284 setaddr_testloop_l:     
                      00285 
0000F2 EC?? F???      00286         call    txdo
                      00287 
0000F6 0100           00288         banksel rc_listen
0000F8 802D           00289         bsf     rc_listen,0
0000FA 0E01           00290         movlw   1
0000FC EC?? F???      00291         call    Delay
000100 0100           00292         banksel rc_listen
000102 A02D           00293         btfss   rc_listen,0
000104 EF?? F???      00294         goto    setaddr1
000108 2E2B           00295         decfsz  loop1,  f
00010A EF?? F???      00296         goto    setaddr_testloop_l
00010E 0012           00297         return                  ; The adress sems nice! Returning, and keep the composed adress!
                      00298         
                      00299         
                      00300         
000110                00301 intserv:
                      00302 
000110 0100           00303         banksel speedlib_main
000112 8037           00304         bsf     speedlib_main,0 ;       Set this bit to one, when an interupt ocurres
                      00305 
                      00306 
000114 A237           00307         btfss   speedlib_main,1         ;; Waiting for response STATE? Jump direct to recend_no_broadcas
                            t
000116 EF?? F???      00308         goto    intserv_norm
00011A 010F           00309         banksel PIR1
00011C BA9E           00310         btfsc   PIR1,RCIF       ;       Check if the recived data bit is set
00011E EF?? F???      00311         goto    rec             ;       Jump to recive data rutine if the PIR1 bit is 1
000122 EF?? F???      00312         goto    restore
                      00313 
000126                00314 intserv_norm:
000126 0100           00315         banksel tmp_W
000128 6E24           00316         movwf   tmp_W           ;       Register BKP before the interup code exec
00012A 50D8           00317         movf    STATUS,W
00012C 6AD8           00318         clrf    STATUS
00012E 6E25           00319         movwf   tmp_STATUS
000130 50FA           00320         movf    PCLATH,W
000132 6E26           00321         movwf   tmp_PCLATH
000134 5020           00322         movf    d1,W
000136 6E27           00323         movwf   d1_tmp
000138 5021           00324         movf    d2,W
00013A 6E28           00325         movwf   d2_tmp
00013C 5022           00326         movf    d3,W
00013E 6E29           00327         movwf   d3_tmp
                      00328         #ifdef  CUSTOM_INTERRUPT
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00329         goto    CUSTOM_INTERRUPT
                      00330 ci_restore:
                      00331         #endif
                      00332 
000140 010F           00333         banksel PIR1
000142 BA9E           00334         btfsc   PIR1,RCIF       ;       Check if the recived data bit is set
000144 EF?? F???      00335         goto    rec             ;       Jump to recive data rutine if the PIR1 bit is 1
                      00336 
                      00337 
000148                00338 restore:
000148 0100           00339         banksel speedlib_main   ;       Restore the regisers
00014A B237           00340         btfsc   speedlib_main,1         ;; Waiting for response STATE? Dont
00014C 0010           00341         retfie                          ;; restore saved, nothing is saved
                      00342 
                      00343         ;; If:  Send back a response package, to confirm that the package has been recived
                      00344 ;        btfss   speedlib_main,2
                      00345 ;        goto    restore_norm
                      00346 ;        bcf     speedlib_main,2
                      00347 ;        call    func_send_response
                      00348         ;;
                      00349 
00014E                00350 restore_norm:
                      00351 
                      00352     
00014E 5027           00353         movf    d1_tmp,W
000150 6E20           00354         movwf   d1
000152 5028           00355         movf    d2_tmp,W
000154 6E21           00356         movwf   d2
000156 5029           00357         movf    d3_tmp,W
000158 6E22           00358         movwf   d3      
00015A 5026           00359         movf    tmp_PCLATH,W
00015C 6EFA           00360         movwf   PCLATH
00015E 5025           00361         movf    tmp_STATUS,W
000160 6ED8           00362         movwf   STATUS
000162 3A24           00363         swapf   tmp_W,F
000164 3824           00364         swapf   tmp_W,W
000166 0010           00365         retfie
                      00366         
                      00367 
000168                00368 rec:
000168 0100           00369         banksel rc_listen
00016A A22D           00370         btfss   rc_listen,1             ; If rc_listen is set to NOT drop the loopback package, jump dir
                            ectly to the rec_start
00016C EF?? F???      00371         goto    rec_start               
                      00372 
000170 922D           00373         bcf     rc_listen,1             ;; Start this rutine with checking that the recived bit NOT was 
                            send from this own device
000172 5030           00374         movf    rc_nocoll,W
000174 010F           00375         banksel RCREG
000176 5CAE           00376         subwf   RCREG,W
000178 A4D8           00377         btfss   STATUS,Z
00017A EF?? F???      00378         goto    rec_oops_coll           ; Anyway, if the rc_listen,1  is 1, and it do not match RCREG, w
                            e may be detected an collission
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00017E EF?? F???      00379         goto    restore
000182                00380 rec_oops_coll:
                      00381 ;       banksel PORTC
                      00382 ;       bsf     PORTC,0
000182 0100           00383         banksel txreturn
000184 823E           00384         bsf     txreturn,1
000186 EF?? F???      00385         goto    restore
                      00386         
00018A                00387 rec_start:
00018A 010F           00388         banksel RCREG
00018C 0E7E           00389         movlw   0x7e
00018E 5CAE           00390         subwf   RCREG,W
000190 B4D8           00391         btfsc   STATUS,Z
000192 EF?? F???      00392         goto    recx            ; Jump if this is a flag bit
000196 0100           00393         banksel rc_gotflag
000198 B02F           00394         btfsc   rc_gotflag,0
00019A EF?? F???      00395         goto    recsave         ; Jump if the flag bit is set
00019E EF?? F???      00396         goto    recr
0001A2                00397 recx:
0001A2 0100           00398         banksel rc_gotflag
0001A4 B02F           00399         btfsc   rc_gotflag,0
0001A6 EF?? F???      00400         goto    recend          ; If this may be end flag, check the package, finalize, check crc
0001AA 802F           00401         bsf     rc_gotflag,0    ; Else set the gotflag, and start recording package!
0001AC 6A2E           00402         clrf    rc_counter      ; Clear the counter :)
0001AE EF?? F???      00403         goto    restore
0001B2                00404 recr:   
                      00405         ;       movf    RCREG,W
                      00406         ;       movwf   TXREG           
0001B2 EF?? F???      00407         goto    restore
                      00408 
0001B6                00409 recsave:
0001B6 010F           00410         banksel RCREG
0001B8 0E7D           00411         movlw   0x7d
0001BA 5CAE           00412         subwf   RCREG,W
0001BC B4D8           00413         btfsc   STATUS,Z
0001BE EF?? F???      00414         goto    recsave_set     ; Set bit in the rc_listen to aktivate escape routines when the next byt
                            e is recived
0001C2 0100           00415         banksel rc_listen
0001C4 B42D           00416         btfsc   rc_listen,2
0001C6 EF?? F???      00417         goto    recsave_unescape
                      00418 
0001CA 010F           00419         banksel RCREG
0001CC 50AE           00420         movf    RCREG,W
0001CE EF?? F???      00421         goto    recsave_add
                      00422 
0001D2                00423 recsave_set:
0001D2 0100           00424         banksel rc_listen
0001D4 842D           00425         bsf     rc_listen,2
0001D6 EF?? F???      00426         goto    restore
                      00427 
0001DA                00428 recsave_unescape:
0001DA 0100           00429         banksel rc_listen
0001DC 942D           00430         bcf     rc_listen,2
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0001DE 0E5E           00431         movlw   0x5e
0001E0 010F           00432         banksel RCREG
0001E2 5CAE           00433         subwf   RCREG,W
0001E4 B4D8           00434         btfsc   STATUS,Z
0001E6 EF?? F???      00435         goto    recsave_unescape_1
0001EA 0E5D           00436         movlw   0x5d
0001EC 5CAE           00437         subwf   RCREG,W
0001EE B4D8           00438         btfsc   STATUS,Z
0001F0 EF?? F???      00439         goto    recsave_unescape_2
0001F4 EF?? F???      00440         goto    restore         ; Maybe you can change this, but a fail package that is the result, will
                             also be CRC checked
                      00441         
0001F8                00442 recsave_unescape_1:
0001F8 0E7E           00443         movlw   0x7e
0001FA EF?? F???      00444         goto    recsave_add
0001FE                00445 recsave_unescape_2:
0001FE 0E7D           00446         movlw   0x7d
000200 EF?? F???      00447         goto    recsave_add
                      00448         
000204                00449 recsave_add:
000204 0100           00450         banksel rc_add_byte
000206 6E31           00451         movwf   rc_add_byte
000208 0E54           00452         movlw   rcframe         ; Place where to put the receiving byte
00020A 242E           00453         addwf   rc_counter,W    ; Add the number in rc_flow, to the pointer, like rcframe[rc_flow] 
00020C 010F           00454         banksel FSR
00020E 6EE1           00455         movwf   FSR
000210 0100           00456         banksel rc_add_byte
000212 5031           00457         movf    rc_add_byte,W
000214 010F           00458         banksel INDF
000216 6EE7           00459         movwf   INDF
000218 0100           00460         banksel rc_counter
00021A 2A2E           00461         incf    rc_counter,F
00021C EF?? F???      00462         goto    restore
                      00463         
000220                00464 recend:
000220 0E05           00465         movlw   5
000222 5C2E           00466         subwf   rc_counter,W
000224 A0D8           00467         btfss   STATUS,C
000226 EF?? F???      00468         goto    reccrcfail
00022A 0100           00469         banksel rc_counter
00022C 042E           00470         decf    rc_counter,W
00022E 6E2E           00471         movwf   rc_counter
000230 6E3A           00472         movwf   crcloop
000232 0E54           00473         movlw   rcframe
000234 010F           00474         banksel FSR
000236 6EE1           00475         movwf   FSR
000238 0100           00476         banksel crc0
00023A 6A38           00477         clrf    crc0
00023C 6A39           00478         clrf    crc1
00023E EC?? F???      00479         call    crcloopr        ; Call CRC function
                      00480 
000242 0100           00481         banksel rcframe
000244 0E54           00482         movlw   rcframe
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000246 242E           00483         addwf   rc_counter,W
000248 010F           00484         banksel FSR
00024A 6EE1           00485         movwf   FSR
                      00486 
00024C 010F           00487         banksel INDF
00024E 50E7           00488         movf    INDF,W
000250 0100           00489         banksel crc1
000252 5C39           00490         subwf   crc1,W
000254 A4D8           00491         btfss   STATUS,Z
000256 EF?? F???      00492         goto    reccrcfail
                      00493 
00025A 010F           00494         banksel FSR
00025C 04E1           00495         decf    FSR,W
00025E 6EE1           00496         movwf   FSR
                      00497 
000260 010F           00498         banksel INDF
000262 50E7           00499         movf    INDF,W
000264 0100           00500         banksel crc0
000266 5C38           00501         subwf   crc0,W
000268 A4D8           00502         btfss   STATUS,Z
00026A EF?? F???      00503         goto    reccrcfail
                      00504 
                      00505         
                      00506         ;; fix so that the cheksum is check:ed and do things ;)
                      00507 
                      00508         ;; REMEMBER, if checksum is right, clear rc_gotflag, else, untuched
00026E 0100           00509         banksel rc_gotflag
000270 902F           00510         bcf     rc_gotflag,0
                      00511 
000272 0E5A           00512         movlw   rcframe+6       ; Move recived byte to W
000274 010F           00513         banksel FSR
000276 6EE1           00514         movwf   FSR
                      00515 
000278                00516 recend_tmp:
                      00517 
000278 0100           00518         banksel speedlib_main
00027A B237           00519         btfsc   speedlib_main,1 ; No CUSTOM command when in Whait for RESP STATE
00027C EF?? F???      00520         goto    recend_no_broadcast
                      00521 
                      00522 
000280 EF?? F???      00523         goto    func_bc
                      00524 
000284                00525 recend_no_broadcast:
                      00526 
000284 0100           00527         banksel rcframe
000286 0E54           00528         movlw   rcframe
000288 010F           00529         banksel FSR
00028A 6EE1           00530         movwf   FSR
00028C 010F           00531         banksel INDF
00028E 50E7           00532         movf    INDF,W          ; Check so that the adress is destinated for me
000290 0100           00533         banksel adress1
000292 5C34           00534         subwf   adress1,W
000294 A4D8           00535         btfss   STATUS,Z
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000296 EF?? F???      00536         goto    restore
00029A 010F           00537         banksel FSR
00029C 28E1           00538         incf    FSR,W
00029E 6EE1           00539         movwf   FSR
0002A0 010F           00540         banksel INDF
0002A2 50E7           00541         movf    INDF,W
0002A4 0100           00542         banksel adress2
0002A6 5C35           00543         subwf   adress2,W
0002A8 A4D8           00544         btfss   STATUS,Z
0002AA EF?? F???      00545         goto    restore
                      00546 
0002AE 0E5A           00547         movlw   rcframe+6       ; Move recived byte to W
0002B0 010F           00548         banksel FSR
0002B2 6EE1           00549         movwf   FSR
                      00550 
0002B4 0E00           00551         movlw   0x00            ; Got response
0002B6 010F           00552         banksel INDF
0002B8 5CE7           00553         subwf   INDF,W
0002BA B4D8           00554         btfsc   STATUS,Z
0002BC EF?? F???      00555         goto    func_check_response
                      00556 
0002C0 0100           00557         banksel speedlib_main
0002C2 B237           00558         btfsc   speedlib_main,1 ; No CUSTOM command when in Whait for RESP STATE
0002C4 EF?? F???      00559         goto    restore
                      00560 
0002C8 5059           00561         movf    rcframe+5,W
0002CA 0801           00562         sublw   0x01
0002CC B4D8           00563         btfsc   STATUS,Z
0002CE EC?? F???      00564         call    func_send_response
                      00565 ;        bsf     speedlib_main,2 ; Set this bit, so the cewd knows that WHEN
                      00566 ;        btfss  STATUS,Z        ; returning to restore, send a response package
                      00567 ;        bcf     speedlib_main,2
                      00568 
                      00569 
                      00570         ;; Make sure that the FSR pointer is pointed right
0002D2 0E5A           00571         movlw   rcframe+6       ; Move recived byte to W
0002D4 010F           00572         banksel FSR
0002D6 6EE1           00573         movwf   FSR
                      00574 
0002D8 0E01           00575         movlw   0x01            ; Send respons for, 0x01 message, destionated for me
0002DA 010F           00576         banksel INDF
0002DC 5CE7           00577         subwf   INDF,W
0002DE B4D8           00578         btfsc   STATUS,Z
0002E0 EF?? F???      00579         goto    func_is_ocupied_send_response
                      00580         
0002E4 0E02           00581         movlw   0x02
0002E6 5CE7           00582         subwf   INDF,W
0002E8 B4D8           00583         btfsc   STATUS,Z
0002EA EF?? F???      00584         goto    func_setport
                      00585 
0002EE 0E03           00586         movlw   0x03
0002F0 5CE7           00587         subwf   INDF,W
0002F2 B4D8           00588         btfsc   STATUS,Z
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0002F4 EF?? F???      00589         goto    func_speedlib_config
                      00590 
                      00591 #ifdef  REC_CUSTOM_JUMP
                      00592         goto    custom_command_handler
                      00593 #endif
0002F8 EF?? F???      00594         goto    restore
                      00595 
0002FC                00596 func_speedlib_config:
0002FC 0E09           00597         movlw   9
0002FE 0100           00598         banksel rc_counter
000300 5C2E           00599         subwf   rc_counter,W
000302 B4D8           00600         btfsc   STATUS,Z
000304 EF?? F???      00601         goto    func_speedlib_config_basics
                      00602 
000308 B0D8           00603         btfsc   STATUS,C
00030A EF?? F???      00604         goto    func_speedlib_config_extended
00030E EF?? F???      00605         goto    restore
                      00606 
000312                00607 func_speedlib_config_extended:
000312 0E5B           00608         movlw   rcframe+7       ; Move recived byte to W
000314 010F           00609         banksel FSR
000316 6EE1           00610         movwf   FSR
000318 0E00           00611         movlw   0x00
00031A 010F           00612         banksel INDF
00031C 5CE7           00613         subwf   INDF,W
00031E B4D8           00614         btfsc   STATUS,Z
000320 EF?? F???      00615         goto    func_speedlib_config_basics
000324 0E01           00616         movlw   0x01
000326 5CE7           00617         subwf   INDF,W
000328 B4D8           00618         btfsc   STATUS,Z
00032A EF?? F???      00619         goto    func_speedlib_config_caddr
00032E EF?? F???      00620         goto    restore
                      00621 
                      00622 
000332                00623 func_speedlib_config_caddr:
000332 0E0C           00624         movlw   12
000334 0100           00625         banksel rc_counter
000336 5C2E           00626         subwf   rc_counter,W
000338 A0D8           00627         btfss   STATUS,C    ;; If rc_counter NOT is more och equal to twelve, jump back
00033A EF?? F???      00628         goto    restore
                      00629 
00033E EC?? F???      00630         call    func_send_response
                      00631         
000342 0E5C           00632         movlw   rcframe+8       ; Move recived byte to W
000344 010F           00633         banksel FSR
000346 6EE1           00634         movwf   FSR
000348 0EFF           00635         movlw   0xFF
00034A 010F           00636         banksel INDF
00034C 5CE7           00637         subwf   INDF,W
00034E A4D8           00638         btfss   STATUS,Z
000350 EF?? F???      00639         goto    func_speedlib_config_caddr_f
000354 010F           00640         banksel FSR
000356 2AE1           00641         incf    FSR,F
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 51


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000358 0EFF           00642         movlw   0xFF
00035A 010F           00643         banksel INDF
00035C 5CE7           00644         subwf   INDF,W
00035E A4D8           00645         btfss   STATUS,Z
000360 EF?? F???      00646         goto    func_speedlib_config_caddr_f
000364 EF?? F???      00647         goto    restore
                      00648 
000368                00649 func_speedlib_config_caddr_f:
                      00650 
000368 0E5C           00651         movlw   rcframe+8       ; Move recived byte to W
00036A 010F           00652         banksel FSR
00036C 6EE1           00653         movwf   FSR
00036E 010F           00654         banksel INDF
000370 50E7           00655         movf    INDF,W
000372 0100           00656         banksel adress1
000374 6E34           00657         movwf   adress1
000376 010F           00658         banksel FSR
000378 2AE1           00659         incf    FSR,f
00037A 010F           00660         banksel INDF
00037C 50E7           00661         movf    INDF,W
00037E 0100           00662         banksel adress2
000380 6E35           00663         movwf   adress2
                      00664 
000382 8236           00665         bsf     speedlib_config,1
                      00666 #ifdef  WRITE_EEPROM
                      00667         ;; Here you probobly want some cewd that writes tha adress to eeprom
                      00668         movlw   0
                      00669         movwf   rc_nocoll
                      00670         movf    adress1,W
                      00671         call    WRITE_EEPROM
                      00672         banksel rc_nocoll
                      00673         movlw   1
                      00674         movwf   rc_nocoll
                      00675         movf    adress2,W
                      00676         call    WRITE_EEPROM
                      00677         banksel rc_nocoll
                      00678         movlw   2
                      00679         movwf   rc_nocoll
                      00680         movf    speedlib_config,W
                      00681         call    WRITE_EEPROM
                      00682 #endif
000384 EF?? F???      00683         goto    restore
                      00684 
000388                00685 func_speedlib_config_basics:
000388 0E0C           00686         movlw   12
00038A EC?? F???      00687         call    Delay
00038E 0E0B           00688         movlw   11
000390 0100           00689         banksel framelen
000392 6E3C           00690         movwf   framelen
                      00691         ;; 0xff broadcast dst adress
000394 0E56           00692         movlw   rcframe+2         ;       dst addr
000396 010F           00693         banksel FSR
000398 6EE1           00694         movwf   FSR
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00039A 010F           00695         banksel INDF
00039C 50E7           00696         movf    INDF,W
00039E 0100           00697         banksel txframe
0003A0 6E3F           00698         movwf   txframe
                      00699         ;; 0xff broadcast dst adress
0003A2 0E57           00700         movlw   rcframe+3         ;       dst addr
0003A4 010F           00701         banksel FSR
0003A6 6EE1           00702         movwf   FSR
0003A8 010F           00703         banksel INDF
0003AA 50E7           00704         movf    INDF,W
0003AC 0100           00705         banksel txframe
0003AE 6E40           00706         movwf   txframe+1
                      00707         ;; * my own src adress
0003B0 5034           00708         movf    adress1, W
0003B2 6E41           00709         movwf   txframe+2
                      00710         ;; * my own src adress
0003B4 5035           00711         movf    adress2, W
0003B6 6E42           00712         movwf   txframe+3
                      00713         ;; 0x03 control bit
0003B8 0E03           00714         movlw   0x03
0003BA 6E43           00715         movwf   txframe+4
                      00716         ;; 0x01 protocoll
0003BC 0E00           00717         movlw   0x00
0003BE 6E44           00718         movwf   txframe+5
                      00719         ;; Data
0003C0 0E03           00720         movlw   0x03
0003C2 6E45           00721         movwf   txframe+6
                      00722         ;; 0x00 Basic config response
0003C4 0E00           00723         movlw   0x00
0003C6 6E46           00724         movwf   txframe+7
                      00725         ;; Send back speedlib_config
0003C8 0E36           00726         movlw   speedlib_config
0003CA 6E47           00727         movwf   txframe+8
                      00728         ;; Padding bit
0003CC 0E00           00729         movlw   0x00
0003CE 6E48           00730         movwf   txframe+9
                      00731 
0003D0 EC?? F???      00732         call    txdo
0003D4 EF?? F???      00733         goto    restore
                      00734 
0003D8                00735 func_send_response:
0003D8 0E09           00736         movlw   SPEEDLIB_RESPONSE_DELAY
0003DA EC?? F???      00737         call    Delay
0003DE 0100           00738         banksel framelen
0003E0 0E09           00739         movlw   9
0003E2 6E3C           00740         movwf   framelen
                      00741         ;; 0xff broadcast dst adress
0003E4 0E56           00742         movlw   rcframe+2         ;       dst addr
0003E6 010F           00743         banksel FSR
0003E8 6EE1           00744         movwf   FSR
0003EA 010F           00745         banksel INDF
0003EC 50E7           00746         movf    INDF,W
0003EE 0100           00747         banksel txframe
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0003F0 6E3F           00748         movwf   txframe
                      00749         ;; 0xff broadcast dst adress
0003F2 0E57           00750         movlw   rcframe+3         ;       dst addr
0003F4 010F           00751         banksel FSR
0003F6 6EE1           00752         movwf   FSR
0003F8 010F           00753         banksel INDF
0003FA 50E7           00754         movf    INDF,W
0003FC 0100           00755         banksel txframe
0003FE 6E40           00756         movwf   txframe+1
                      00757         ;; * my own src adress
000400 5034           00758         movf    adress1, W
000402 6E41           00759         movwf   txframe+2
                      00760         ;; * my own src adress
000404 5035           00761         movf    adress2, W
000406 6E42           00762         movwf   txframe+3
                      00763         ;; 0x03 control bit
000408 0E03           00764         movlw   0x03
00040A 6E43           00765         movwf   txframe+4
                      00766         ;; 0x01 protocoll
00040C 0E01           00767         movlw   0x01
00040E 6E44           00768         movwf   txframe+5
                      00769         ;; Data
000410 0E00           00770         movlw   0x00
000412 6E45           00771         movwf   txframe+6
                      00772         ;; Padding bit
000414 0E00           00773         movlw   0x00
000416 6E46           00774         movwf   txframe+7
                      00775 
                      00776         ;; This is a broadcast package with adress on it
                      00777 
000418 EC?? F???      00778         call    txdo
00041C 0012           00779         return
                      00780 
00041E                00781 func_check_response:
                      00782 ; May be more advanced in the future, but for now, i dont se any reason why
                      00783 ; we should make this functione more advanced, how many response packages are
                      00784 ; realy exchange in a cuple of ms? -.- //  Speedster
00041E 0100           00785         banksel rc_listen
000420 862D           00786         bsf     rc_listen,3
000422 EF?? F???      00787         goto    restore
                      00788 
                      00789 
000426                00790 func_is_ocupied_send_response:
000426 0E0C           00791         movlw   12              ; Pretty strange, but you need this, so no colission or somthing will be
                             made betwen PC and ansoring device
000428 EC?? F???      00792         call    Delay
00042C 0100           00793         banksel rc_listen
                      00794         ;; Send Package:
00042E B02D           00795         btfsc   rc_listen,0
000430 EF?? F???      00796         goto    func_is_ocupied_send_response_got_resp
000434 EF?? F???      00797         goto    func_is_ocupied_send_response_pack
Warning[208]: Label truncated at 32 characters. (func_is_ocupied_send_response_got_resp)
000438                00798 func_is_ocupied_send_response_got_resp:
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000438 902D           00799         bcf     rc_listen,0
00043A EF?? F???      00800         goto    restore
                      00801 
Warning[208]: Label truncated at 32 characters. (func_is_ocupied_send_response_pack)
00043E                00802 func_is_ocupied_send_response_pack:
00043E B82D           00803         btfsc   rc_listen,4
000440 EF?? F???      00804         goto    restore
000444 0E09           00805         movlw   9
000446 0100           00806         banksel framelen
000448 6E3C           00807         movwf   framelen
                      00808         ;; 0xff broadcast dst adress
00044A 0E56           00809         movlw   rcframe+2         ;       dst addr
00044C 010F           00810         banksel FSR
00044E 6EE1           00811         movwf   FSR
000450 010F           00812         banksel INDF
000452 50E7           00813         movf    INDF,W
000454 0100           00814         banksel txframe
000456 6E3F           00815         movwf   txframe
                      00816         ;; 0xff broadcast dst adress
000458 0E57           00817         movlw   rcframe+3         ;       dst addr
00045A 010F           00818         banksel FSR
00045C 6EE1           00819         movwf   FSR
00045E 010F           00820         banksel INDF
000460 50E7           00821         movf    INDF,W
000462 0100           00822         banksel txframe
000464 6E40           00823         movwf   txframe+1
                      00824         ;; * my own src adress
000466 5034           00825         movf    adress1, W
000468 6E41           00826         movwf   txframe+2
                      00827         ;; * my own src adress
00046A 5035           00828         movf    adress2, W
00046C 6E42           00829         movwf   txframe+3
                      00830         ;; 0x03 control bit
00046E 0E03           00831         movlw   0x03
000470 6E43           00832         movwf   txframe+4
                      00833         ;; 0x01 protocoll
000472 0E00           00834         movlw   0x00
000474 6E44           00835         movwf   txframe+5
                      00836         ;; Data
000476 0E01           00837         movlw   0x01
000478 6E45           00838         movwf   txframe+6
                      00839         ;; Padding bit
00047A 0E00           00840         movlw   0x00
00047C 6E46           00841         movwf   txframe+7
                      00842         
                      00843         ;; This is a broadcast package with adress on it
                      00844 
00047E EC?? F???      00845         call    txdo    
                      00846 
000482 EF?? F???      00847         goto    restore
                      00848 
                      00849         
000486                00850 func_bc:
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00851 ; 120623 A new era has become speedbus, all package that are need to, shall for
                      00852 ; now be sent with an respons, and, for that reason, i no more use command 0x00
                      00853 ; for is_occupied commands. When an 0x01 NOT is broadcast(it got a real adress)
                      00854 ; It is ment to bee like an old 0x00, if it is not an bc, send is_occupied.
                      00855 ; For now on, 0x00 is used to respond packages that need a response! Over'n out
                      00856 ; // Speedster
                      00857 
000486 0100           00858         banksel rcframe
000488 0E54           00859         movlw   rcframe         ;       dst addr
00048A 010F           00860         banksel FSR
00048C 6EE1           00861         movwf   FSR
                      00862         
00048E 0EFF           00863         movlw   0xFF            ;       check dst adress1
000490 010F           00864         banksel INDF
000492 5CE7           00865         subwf   INDF,W
000494 A4D8           00866         btfss   STATUS,Z
000496 EF?? F???      00867         goto    recend_no_broadcast
                      00868 
00049A 010F           00869         banksel FSR
00049C 28E1           00870         incf    FSR,W           ;       Increase the address    
00049E 6EE1           00871         movwf   FSR
                      00872 
0004A0 0EFF           00873         movlw   0xFF            ;       check dst adress2
0004A2 010F           00874         banksel INDF
0004A4 5CE7           00875         subwf   INDF,W
0004A6 A4D8           00876         btfss   STATUS,Z
0004A8 EF?? F???      00877         goto    recend_no_broadcast
                      00878         
0004AC 0E5A           00879         movlw   rcframe+6        
0004AE 010F           00880         banksel FSR
0004B0 6EE1           00881         movwf   FSR
0004B2 0E01           00882         movlw   0x01
0004B4 010F           00883         banksel INDF
0004B6 5CE7           00884         subwf   INDF,W
0004B8 B4D8           00885         btfsc   STATUS,Z
0004BA EF?? F???      00886         goto    func_bc_01
                      00887 
                      00888 #ifdef  on_got_IAH
0004BE 0E03           00889         movlw   0x03
0004C0 010F           00890         banksel INDF
0004C2 5CE7           00891         subwf   INDF,W
0004C4 A4D8           00892         btfss   STATUS,Z
0004C6 EF?? F???      00893         goto    restore
0004CA 010F           00894         banksel INDF
0004CC 2AE1           00895         incf    FSR, F
0004CE 0E01           00896         movlw   0x01
0004D0 010F           00897         banksel INDF
0004D2 5CE7           00898         subwf   INDF,W
0004D4 A4D8           00899         btfss   STATUS,Z
0004D6 EF?? F???      00900         goto    restore
0004DA EF?? F???      00901         goto    on_got_IAH
                      00902 #endif
0004DE EF?? F???      00903         goto    restore
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00904 
0004E2                00905 func_bc_01:
0004E2 0E59           00906         movlw   rcframe+5
0004E4 010F           00907         banksel FSR
0004E6 6EE1           00908         movwf   FSR
0004E8 0E01           00909         movlw   0x01
0004EA 010F           00910         banksel INDF
0004EC 5CE7           00911         subwf   INDF,W
0004EE B4D8           00912         btfsc   STATUS,Z
0004F0 EF?? F???      00913         goto    func_bc_sendaddr
0004F4 0E00           00914         movlw   0x00
0004F6 5CE7           00915         subwf   INDF,W
0004F8 B4D8           00916         btfsc   STATUS,Z
0004FA EC?? F???      00917         call    func_send_response
0004FE EF?? F???      00918         goto    restore
                      00919 
                      00920 
000502                00921 func_bc_sendaddr:       
000502 EC?? F???      00922         call    trd      ; Three random delay:s before ansor broadcast
                      00923 
000506 EC?? F???      00924         call    func_set_rsp_addr ;; Set rsp_adress to the src adress of the last recived package
                      00925 
                      00926         ;; Send Package:
00050A 0100           00927         banksel framelen
00050C 0E0B           00928         movlw   11
00050E 6E3C           00929         movwf   framelen
                      00930         ;; dst adress
000510 5032           00931         movf    rsp_adress1,W
000512 6E3F           00932         movwf   txframe
                      00933         ;; dst adress
000514 5033           00934         movf    rsp_adress2,W
000516 6E40           00935         movwf   txframe+1
                      00936         ;; * my own src adress
000518 5034           00937         movf    adress1, W
00051A 6E41           00938         movwf   txframe+2
                      00939         ;; * my own src adress
00051C 5035           00940         movf    adress2, W
00051E 6E42           00941         movwf   txframe+3
                      00942         ;; 0x03 control bit
000520 0E03           00943         movlw   0x03
000522 6E43           00944         movwf   txframe+4
                      00945         ;; 0x01 protocoll
000524 0E01           00946         movlw   0x01
000526 6E44           00947         movwf   txframe+5
                      00948         ;; Data
000528 0E01           00949         movlw   0x01
00052A 6E45           00950         movwf   txframe+6
                      00951         ;; Data - DeviceID
00052C 0E40           00952         movlw   DEV_ID1
00052E 6E46           00953         movwf   txframe+7
                      00954         ;; Data - DeviceID
000530 0E2F           00955         movlw   DEV_ID2
000532 6E47           00956         movwf   txframe+8
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00957         ;; Padding bit
000534 0E00           00958         movlw   0x00
000536 6E48           00959         movwf   txframe+9
                      00960         
                      00961         ;; This is a broadcast package with adress on it
                      00962 ;
000538 0E01           00963         movlw   0x01
00053A 5C59           00964         subwf   rcframe+5,W
00053C B4D8           00965         btfsc   STATUS,Z
00053E EF?? F???      00966         goto    handle_response
000542 EC?? F???      00967         call    txdo
                      00968 ;
000546 EF?? F???      00969         goto    restore
                      00970 
00054A                00971 func_send_iam_here: ; IMPORTANT, this function "return", use "call func_send_iam_here"
00054A 0E0C           00972         movlw   12
00054C 0100           00973         banksel framelen
00054E 6E3C           00974         movwf   framelen
                      00975 
000550 0EFF           00976         movlw   0xFF
000552 6E3F           00977         movwf   txframe
                      00978 
000554 0EFF           00979         movlw   0xFF
000556 6E40           00980         movwf   txframe+1
                      00981         ;; * my own src adress
000558 5034           00982         movf    adress1, W
00055A 6E41           00983         movwf   txframe+2
                      00984         ;; * my own src adress
00055C 5035           00985         movf    adress2, W
00055E 6E42           00986         movwf   txframe+3
                      00987         ;; 0x03 control bit
000560 0E03           00988         movlw   0x03
000562 6E43           00989         movwf   txframe+4
                      00990         ;; 0x01 protocoll
000564 0E00           00991         movlw   0x00
000566 6E44           00992         movwf   txframe+5
                      00993         ;; Data
000568 0E03           00994         movlw   0x03
00056A 6E45           00995         movwf   txframe+6
                      00996         ;; 0x00 Basic config response
00056C 0E01           00997         movlw   0x01
00056E 6E46           00998         movwf   txframe+7
                      00999         ;; Data - DeviceID
000570 0E40           01000         movlw   DEV_ID1
000572 6E47           01001         movwf   txframe+8
                      01002         ;; Data - DeviceID
000574 0E2F           01003         movlw   DEV_ID2
000576 6E48           01004         movwf   txframe+9
                      01005         ;; Padding bit
000578 0E00           01006         movlw   0x00
00057A 6E49           01007         movwf   txframe+10
                      01008 
00057C EC?? F???      01009         call    txdo
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 58


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000580 0012           01010         return  
                      01011 
000582                01012 func_rand_addr:
000582 0100           01013         banksel rand
000584 502A           01014         movf    rand,W
000586 6E34           01015         movwf   adress1
000588 EC?? F???      01016         call    lfsr_func
00058C 0100           01017         banksel rand
00058E 502A           01018         movf    rand,W
000590 6E35           01019         movwf   adress2
000592 0012           01020         return
                      01021 
000594                01022 func_setport:
000594 0E02           01023         movlw   2
000596 010F           01024         banksel FSR
000598 26E1           01025         addwf   FSR,F
00059A 010F           01026         banksel INDF
00059C 50E7           01027         movf    INDF,W
00059E 010F           01028         banksel PORTC
0005A0 6E82           01029         movwf   PORTC
0005A2 EF?? F???      01030         goto    restore
                      01031 
0005A6                01032 func_set_rsp_addr:
                      01033         ;; Add last rec package src addr to rsp_adress1 rsp_adress2
0005A6 0E56           01034         movlw   rcframe+2         ;       dst addr
0005A8 010F           01035         banksel FSR
0005AA 6EE1           01036         movwf   FSR
0005AC 010F           01037         banksel INDF
0005AE 50E7           01038         movf    INDF,W
0005B0 0100           01039         banksel rsp_adress1
0005B2 6E32           01040         movwf   rsp_adress1
0005B4 0E57           01041         movlw   rcframe+3         ;       dst addr
0005B6 010F           01042         banksel FSR
0005B8 6EE1           01043         movwf   FSR
0005BA 010F           01044         banksel INDF
0005BC 50E7           01045         movf    INDF,W
0005BE 0100           01046         banksel rsp_adress2
0005C0 6E33           01047         movwf   rsp_adress2
0005C2 0012           01048         return
                      01049 
0005C4                01050 handle_response:
0005C4 0100           01051         banksel rc_listen
0005C6 962D           01052         bcf     rc_listen,3
0005C8 8237           01053         bsf     speedlib_main,1
0005CA 922D           01054         bcf     rc_listen,1
                      01055 
                      01056 
                      01057     ; Important, this should be run in "main space", not interupt space, soo,
                      01058     ; well, now it is runed somewheare in the middle, wait for response STATE
0005CC 010F           01059         banksel INTCON
0005CE 8EF2           01060         bsf     INTCON,GIE
0005D0 0E0A           01061         movlw   10
0005D2 0100           01062         banksel loop1
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 59


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0005D4 6E2B           01063         movwf   loop1
0005D6                01064 handle_response_loop:
0005D6 EC?? F???      01065         call    txdo
0005DA 0EFA           01066         movlw   250
0005DC EC?? F???      01067         call    Delay
                      01068 
                      01069         ;; If error
0005E0 010F           01070         banksel RCSTA
0005E2 B2AB           01071         btfsc   RCSTA,OERR
0005E4 EC?? F???      01072         call    recerror
                      01073         ;;
0005E8 0100           01074         banksel rc_listen
0005EA B62D           01075         btfsc   rc_listen,3
0005EC EF?? F???      01076         goto    handle_response_ret
0005F0 2E2B           01077         decfsz  loop1,f
0005F2 EF?? F???      01078         goto    handle_response_loop
                      01079 
0005F6                01080 handle_response_ret:
0005F6 962D           01081         bcf     rc_listen,3
0005F8 9237           01082         bcf     speedlib_main,1
0005FA EF?? F???      01083         goto    restore
                      01084 
0005FE                01085 reccrcfail:
                      01086         ;; Because that this happend directrly after a crc-fail, here we need to clear the counter, so t
                            he newxt comming package will start allover
0005FE 0100           01087         banksel rc_counter
000600 502E           01088         movf    rc_counter,W
000602 6A2E           01089         clrf    rc_counter
                      01090         ;; Do somthing
                      01091 ;       movlw    B'00000001'    ;toggle bit3
                      01092 ;       banksel  PORTC
                      01093 ;       xorwf    PORTC,F
000604 EF?? F???      01094         goto    restore
                      01095         
000608                01096 recerror:
                      01097         ;; Do somthing
000608 010F           01098         banksel RCSTA
00060A 98AB           01099         bcf     RCSTA,CREN
00060C 88AB           01100         bsf     RCSTA,CREN
00060E 0012           01101         return
000610                01102 txoops:                         ; Colisson has ocurred
000610 0100           01103         banksel txreturn
000612 923E           01104         bcf     txreturn,1
000614 EC?? F???      01105         call    lfsr_func
000618 0100           01106         banksel rand
00061A 502A           01107         movf    rand,W
00061C EC?? F???      01108         call    Delay
000620 EF?? F???      01109         goto    txdo2
                      01110 
000624                01111 tx_send:
000624 0100           01112         banksel txtmp
000626 6E3D           01113         movwf   txtmp
000628 0E7E           01114         movlw   0x7e            
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 60


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00062A 5C3D           01115         subwf   txtmp,W         
00062C B4D8           01116         btfsc   STATUS,Z
00062E EF?? F???      01117         goto    tx_send_escape_1
                      01118 
000632 0E7D           01119         movlw   0x7d
000634 5C3D           01120         subwf   txtmp,W
000636 B4D8           01121         btfsc   STATUS,Z
000638 EF?? F???      01122         goto    tx_send_escape_2
00063C 503D           01123         movf    txtmp,W
                      01124         
00063E                01125 tx_send_noescape:       
00063E 0100           01126         banksel txtmp
000640 6E3D           01127         movwf   txtmp
000642 010F           01128         banksel TXSTA
000644                01129 tx_send_noescape_l:
000644 A2AC           01130         btfss   TXSTA,TRMT
000646 EF?? F???      01131         goto    tx_send_noescape_l
00064A 0100           01132         banksel d1
00064C 0E02           01133         movlw   0x02
00064E 6E20           01134         movwf   d1
000650                01135 tx_send_noescape_d1:
000650 0EFF           01136         movlw   0xFF
000652 2E00           01137         decfsz  W,f
000654 EF?? F???      01138         goto    tx_send_noescape_d1
000658 2E20           01139         decfsz  d1,f
00065A EF?? F???      01140         goto    tx_send_noescape_d1
                      01141 
00065E 503D           01142         movf    txtmp,W
000660 822D           01143         bsf     rc_listen, 1
000662 6E30           01144         movwf   rc_nocoll
000664 010F           01145         banksel TXREG
000666 6EAD           01146         movwf   TXREG
                      01147 
000668 0100           01148         banksel d1
00066A 0E02           01149         movlw   0x02
00066C 6E20           01150         movwf   d1
00066E                01151 tx_send_noescape_d2:
00066E 0EFF           01152         movlw   0xFF
000670 2E00           01153         decfsz  W,f
000672 EF?? F???      01154         goto    tx_send_noescape_d2
000676 2E20           01155         decfsz  d1,f
000678 EF?? F???      01156         goto    tx_send_noescape_d2
00067C 0012           01157         return
                      01158 
00067E                01159 tx_send_escape_1:
00067E 0E7D           01160         movlw   0x7d
000680 EC?? F???      01161         call    tx_send_noescape
000684 0E5E           01162         movlw   0x5e
000686 EC?? F???      01163         call    tx_send_noescape
00068A 0012           01164         return
                      01165 
00068C                01166 tx_send_escape_2:
00068C 0E7D           01167         movlw   0x7d
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 61


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00068E EC?? F???      01168         call    tx_send_noescape
000692 0E5D           01169         movlw   0x5d
000694 EC?? F???      01170         call    tx_send_noescape
000698 0012           01171         return
                      01172         
                      01173 
00069A                01174 txdo:                           ; This is like the funktion argumnents, they need to be set at every pre
                            sense of crcloopr
                      01175 
00069A 0100           01176         banksel framelen
00069C 503C           01177         movf    framelen,W
00069E 6E3A           01178         movwf   crcloop
0006A0 0E3F           01179         movlw   txframe
0006A2 010F           01180         banksel FSR
0006A4 6EE1           01181         movwf   FSR
0006A6 0100           01182         banksel crc0
0006A8 6A38           01183         clrf    crc0
0006AA 6A39           01184         clrf    crc1
0006AC EC?? F???      01185         call    crcloopr
0006B0 EF?? F???      01186         goto    txdo2
0006B4                01187 crcloopr:
0006B4 0100           01188         banksel crcloop
0006B6 2E3A           01189         decfsz  crcloop, f
0006B8 EF?? F???      01190         goto    crccalc
0006BC 0012           01191         return
                      01192 
0006BE                01193 crccalc:
0006BE 010F           01194         banksel INDF
0006C0 50E7           01195         movf  INDF,W            ;;load w with next databyte
0006C2 0100           01196         banksel crc1
0006C4 1839           01197         xorwf crc1,W            ;;(a^x):(b^y)
0006C6 6E3B           01198         movwf crctmp            ;;
0006C8 0BF0           01199         andlw 0xf0              ;; W = (a^x):0
0006CA 3A3B           01200         swapf crctmp,F          ;; Index = (b^y):(a^x)
0006CC 1A3B           01201         xorwf crctmp,F          ;; Index = (a^b^x^y):(a^x) = i2:i1
                      01202 
                      01203                                 ;; High byte
0006CE 503B           01204         movf  crctmp,W
0006D0 0BF0           01205         andlw 0xf0
0006D2 1838           01206         xorwf crc0,W
0006D4 6E39           01207         movwf crc1
                      01208 #ifdef  ARC_18F
0006D6 343B           01209         rlcf crctmp,W
0006D8 343B           01210         rlcf crctmp,W
                      01211 #endif
                      01212 #ifdef  ARC_16F
                      01213         rlf  crctmp,W           ;; use rlf for PIC16
                      01214         rlf  crctmp,W           ;; use rlf for PIC16
                      01215 #endif
0006DA 1A39           01216         xorwf crc1,F
0006DC 0BE0           01217         andlw 0xe0
0006DE 1A39           01218         xorwf crc1,F
                      01219 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 62


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0006E0 3A3B           01220         swapf crctmp,F
0006E2 183B           01221         xorwf crctmp,W
0006E4 6E38           01222         movwf crc0
0006E6 010F           01223         banksel FSR
0006E8 28E1           01224         incf    FSR,W
0006EA 6EE1           01225         movwf   FSR
0006EC EF?? F???      01226         goto crcloopr
                      01227 
0006F0                01228 txdo2:
                      01229         ;; Set TX enable
0006F0 010F           01230         banksel PORTB
0006F2 8881           01231         bsf     PORTB,4
                      01232         ;;
0006F4 0E7E           01233         movlw   0x7e
0006F6 EC?? F???      01234         call    tx_send_noescape
0006FA 0100           01235         banksel txframe
0006FC 0E3F           01236         movlw   txframe
0006FE 010F           01237         banksel FSR
000700 6EE1           01238         movwf   FSR
000702 0100           01239         banksel framelen
000704 503C           01240         movf    framelen,W
000706 6E3A           01241         movwf   crcloop
000708                01242 send:
000708 0100           01243         banksel crcloop
00070A 2E3A           01244         decfsz  crcloop,f
00070C EF?? F???      01245         goto    lopp
000710 EF?? F???      01246         goto    crcsend
000714                01247 lopp:
000714 010F           01248         banksel INDF
000716 50E7           01249         movf    INDF,W
000718 EC?? F???      01250         call    tx_send
00071C 010F           01251         banksel FSR
00071E 2AE1           01252         incf    FSR,F
000720 EF?? F???      01253         goto    send
                      01254 
000724                01255 crcsend:
000724 0100           01256         banksel crc0
000726 5038           01257         movf    crc0,W
000728 EC?? F???      01258         call    tx_send
00072C 0100           01259         banksel crc1
00072E 5039           01260         movf    crc1,W
000730 EC?? F???      01261         call    tx_send
000734 EF?? F???      01262         goto    endflag
                      01263 
000738                01264 endflag:
000738 B23E           01265         btfsc   txreturn,1
00073A EF?? F???      01266         goto    txoops
00073E 0E7E           01267         movlw   0x7e
000740 EC?? F???      01268         call    tx_send_noescape
                      01269         ;; Disable TX enable
000744 010F           01270         banksel PORTB
000746 9881           01271         bcf     PORTB,4
                      01272 
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 63


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000748 0012           01273         return
                      01274 
00074A                01275 trd:    
00074A EC?? F???      01276         call    lfsr_func               ; Three random delays before sending broadcast
00074E 0100           01277         banksel rand
000750 502A           01278         movf    rand,W
000752 EC?? F???      01279         call    Delay
000756 EC?? F???      01280         call    lfsr_func
00075A 0100           01281         banksel rand
00075C 502A           01282         movf    rand,W
00075E EC?? F???      01283         call    Delay
000762 EC?? F???      01284         call    lfsr_func
000766 0100           01285         banksel rand
000768 502A           01286         movf    rand,W
00076A EC?? F???      01287         call    Delay
00076E 0012           01288         return
                      01289         
000770                01290 lfsr_func:
000770 0100           01291         banksel rand
                      01292 #ifdef  ARC_18F
000772 342A           01293         rlcf     rand,W
000774 342A           01294         rlcf     rand,W
                      01295 #endif
                      01296 #ifdef  ARC_16F
                      01297         rlf     rand,W
                      01298         rlf     rand,W
                      01299 #endif
000776 B82A           01300         btfsc   rand,4
000778 0A01           01301         xorlw   1
00077A BA2A           01302         btfsc   rand,5
00077C 0A01           01303         xorlw   1
00077E B62A           01304         btfsc   rand,3
000780 0A01           01305         xorlw   1
000782 6E2A           01306         movwf   rand
000784 0C00           01307         retlw   0
                      01308         
000786                01309 Delay:
000786 0100           01310         banksel d1
                      01311         ;; 499994 cycles
000788 6E22           01312         movwf   d3
00078A 0EFF           01313         movlw   0xFF
00078C 6E21           01314         movwf   d2
00078E 0E32           01315         movlw   50
000790 6E20           01316         movwf   d1
000792                01317 Delay_0:
000792 2E20           01318         decfsz  d1, f
000794 EF?? F???      01319         goto    Delay_0
000798 0E14           01320         movlw   20              ; Need this for tuning
00079A 6E20           01321         movwf   d1
00079C 2E21           01322         decfsz  d2, f
00079E EF?? F???      01323         goto    Delay_0
0007A2 0E64           01324         movlw   100
0007A4 6E21           01325         movwf   d2
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 64


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0007A6 2E22           01326         decfsz  d3, f
0007A8 EF?? F???      01327         goto    Delay_0
0007AC 0012           01328         return
                      01329 
                      01330 ;read_eeprom:
                      01331 ;        banksel EEADR
                      01332 ;        ;; Take the preset W number, and take the byte from the addr
                      01333 ;        movwf   EEADR
                      01334 ;        banksel EECON1
                      01335 ;        bcf     EECON1, EEPGD
                      01336 ;        bsf     EECON1, RD
                      01337 ;
                      01338 ;        btfsc   EECON1, RD
                      01339 ;        goto    $-1
                      01340 ;
                      01341 ;        ;; Put the result in W
                      01342 ;        banksel EEDAT
                      01343 ;        movf    EEDAT, W
                      01344 ;        return
                      01345 ;
                      01346 ;write_eeprom:
                      01347 ;        banksel EEDAT
                      01348 ;        movwf   EEDAT ; write the value already in W to EEDAT, the data
                      01349 ;        banksel rc_nocoll
                      01350 ;        movf    rc_nocoll,W
                      01351 ;        banksel EEADR
                      01352 ;        movwf   EEADR
                      01353 ;        banksel EECON1
                      01354 ;        bcf     EECON1, EEPGD
                      01355 ;        bsf     EECON1, WREN
                      01356 ;
                      01357 ;        banksel EECON2
                      01358 ;        ; bcf   INTCON, GIE ; Well, GIE should be zero when it gets here
                      01359 ;        movlw   0x55
                      01360 ;        movwf   EECON2
                      01361 ;        movlw   0xAA
                      01362 ;        movwf   EECON2
                      01363 ;        banksel EECON1
                      01364 ;        bsf     EECON1, WR
                      01365 ;        ; bsf     INTCON, GIE
                      01366 
                      01367 
                      01368 ;        btfsc   EECON1, WR
                      01369 ;        goto    $-1
                      01370 
                      01371 
                      01372  ;       bcf     EECON1, WREN
                      01373  ;       return
                      01979 
                      01980         end
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 65


SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ABDEN                             00000000
ABDOVF                            00000007
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ACTVIE                            00000002
ACTVIF                            00000002
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCON2                            00000FC0
ADCS0                             00000000
ADCS1                             00000001
ADCS2                             00000002
ADDEN                             00000003
ADDR0                             00000000
ADDR1                             00000001
ADDR2                             00000002
ADDR3                             00000003
ADDR4                             00000004
ADDR5                             00000005
ADDR6                             00000006
ADEN                              00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
AN0                               00000000
AN1                               00000001
AN2                               00000002
AN3                               00000003
AN4                               00000005
ARC_18F                           1
BANKED                            00000001
BAUDCON                           00000FB8
BAUDCTL                           00000FB8
BCLIE                             00000003
BCLIF                             00000003
BCLIP                             00000003
BF                                00000000
BGST                              00000005
BOR                               00000000
BRG16                             00000003
BRGH                              00000002
BSR                               00000FE0
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 66


SYMBOL TABLE
  LABEL                             VALUE 

BTOEE                             00000004
BTOEF                             00000004
BTSEE                             00000007
BTSEF                             00000007
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1                              00000002
CCP1AS                            00000FB6
CCP1CON                           00000FBD
CCP1DEL                           00000FB7
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP2CON                           00000FBA
CCP2IE                            00000000
CCP2IF                            00000000
CCP2IP                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CCPR2                             00000FBB
CCPR2H                            00000FBC
CCPR2L                            00000FBB
CFGS                              00000006
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
CIS                               00000003
CK                                00000006
CK1SPP                            00000000
CK2SPP                            00000001
CKE                               00000006
CKP                               00000004
CLK1EN                            00000004
CLKCFG0                           00000006
CLKCFG1                           00000007
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000FB4
CMIE                              00000006
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 67


SYMBOL TABLE
  LABEL                             VALUE 

CMIF                              00000006
CMIP                              00000006
CRC16EE                           00000002
CRC16EF                           00000002
CRC5EE                            00000001
CRC5EF                            00000001
CREN                              00000004
CSEN                              00000005
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            00000FB5
CVREF                             00000004
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
CVRSS                             00000004
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
DDRE                              TRISE
DEV_ID1                           64
DEV_ID2                           47
DFN8EE                            00000003
DFN8EF                            00000003
DIR                               00000002
DONE                              00000001
D_A                               00000005
D_NOT_A                           00000005
Delay                             00000786
Delay_0                           00000792
ECCP1AS                           00000FB6
ECCP1CON                          00000FBD
ECCP1DEL                          00000FB7
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             00000FA9
EECON1                            00000FA6
EECON2                            00000FA7
EEDAT                             EEDATA
EEDATA                            00000FA8
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 68


SYMBOL TABLE
  LABEL                             VALUE 

EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
ENDP0                             00000003
ENDP1                             00000004
ENDP2                             00000005
ENDP3                             00000006
EPCONDIS                          00000003
EPHSHK                            00000004
EPINEN                            00000001
EPOUTEN                           00000002
EPSTALL                           00000000
FAST                              00000001
FERR                              00000002
FLTS                              00000002
FREE                              00000004
FRM0                              00000000
FRM1                              00000001
FRM10                             00000002
FRM2                              00000002
FRM3                              00000003
FRM4                              00000004
FRM5                              00000005
FRM6                              00000006
FRM7                              00000007
FRM8                              00000000
FRM9                              00000001
FSEN                              00000002
FSR                               FSR1L
FSR0                              00000000
FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1L                             00000FE1
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
GCEN                              00000007
GIE                               00000007
GIEH                              00000007
GIEL                              00000006
GIE_GIEH                          00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
HLVDCON                           00000FD2
HLVDEN                            00000004
HLVDIE                            00000002
HLVDIF                            00000002
HLVDIN                            00000005
HLVDIP                            00000002
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 69


SYMBOL TABLE
  LABEL                             VALUE 

HLVDL0                            00000000
HLVDL1                            00000001
HLVDL2                            00000002
HLVDL3                            00000003
I2C_DAT                           00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IDLEIE                            00000004
IDLEIF                            00000004
IDLEN                             00000007
INDF                              INDF1
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
INT2E                             00000004
INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTEDG0                           00000006
INTEDG1                           00000005
INTEDG2                           00000004
INTSRC                            00000007
IOFS                              00000002
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRVST                             00000005
IVRST                             00000005
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 70


SYMBOL TABLE
  LABEL                             VALUE 

LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC6                             00000006
LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
LATE1                             00000001
LATE2                             00000002
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDIN                             00000005
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
LVV0                              00000000
LVV1                              00000001
LVV2                              00000002
LVV3                              00000003
N                                 00000004
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_IPEN                          00000007
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 71


SYMBOL TABLE
  LABEL                             VALUE 

NOT_PD                            00000002
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RI                            00000004
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OESPP                             00000002
OSC2                              00000006
OSCCON                            00000FD3
OSCFIE                            00000007
OSCFIF                            00000007
OSCFIP                            00000007
OSCTUNE                           00000F9B
OSTS                              00000003
OV                                00000003
P                                 00000004
P1A                               00000002
P1M0                              00000006
P1M1                              00000007
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEIE_GIEL                         00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
PIDEE                             00000000
PIDEF                             00000000
PIE1                              00000F9D
PIE2                              00000FA0
PIR1                              00000F9E
PIR2                              00000FA1
PKTDIS                            00000004
PLUSW0                            00000FEB
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 72


SYMBOL TABLE
  LABEL                             VALUE 

PLUSW1                            00000FE3
PLUSW2                            00000FDB
POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
POSTINC1                          00000FE6
POSTINC2                          00000FDE
PPB0                              00000000
PPB1                              00000001
PPBI                              00000001
PPBRST                            00000006
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
PRODL                             00000FF3
PRSEN                             00000007
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
RC0                               00000000
RC1                               00000001
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 73


SYMBOL TABLE
  LABEL                             VALUE 

RC2                               00000002
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCMT                              00000006
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RDPU                              00000007
RDSPP                             00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
RESUME                            00000002
RI                                00000004
RSEN                              00000001
RX                                00000007
RX9                               00000006
RX9D                              00000000
RXDTP                             00000005
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SBOREN                            00000006
SCKP                              00000004
SCS0                              00000000
SCS1                              00000001
SE0                               00000005
SEN                               00000000
SENDB                             00000003
SMP                               00000007
SOFIE                             00000006
SOFIF                             00000006
SPBRG                             00000FAF
SPBRGH                            00000FB0
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 74


SYMBOL TABLE
  LABEL                             VALUE 

SPEEDLIB_RESPONSE_DELAY           9
SPEN                              00000007
SPP0                              00000000
SPP1                              00000001
SPP2                              00000002
SPP3                              00000003
SPP4                              00000004
SPP5                              00000005
SPP6                              00000006
SPP7                              00000007
SPPBUSY                           00000004
SPPCFG                            00000F63
SPPCON                            00000F65
SPPDATA                           00000F62
SPPEN                             00000000
SPPEPS                            00000F64
SPPIE                             00000007
SPPIF                             00000007
SPPIP                             00000007
SPPOWN                            00000001
SREN                              00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
STALLIE                           00000005
STALLIF                           00000005
STATUS                            00000FD8
STKFUL                            00000007
STKOVF                            00000007
STKPTR                            00000FFC
STKPTR0                           00000000
STKPTR1                           00000001
STKPTR2                           00000002
STKPTR3                           00000003
STKPTR4                           00000004
STKUNF                            00000006
SUSPND                            00000001
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
T08BIT                            00000006
T0CKI                             00000004
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 75


SYMBOL TABLE
  LABEL                             VALUE 

T0CON                             00000FD5
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0IP                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0SE                              00000004
T13CKI                            00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000FCA
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3NSYNC                           00000002
T3SYNC                            00000002
TABLAT                            00000FF5
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TMR0                              00000FD6
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1                              00000FCE
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
TMR2                              00000FCC
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 76


SYMBOL TABLE
  LABEL                             VALUE 

TMR2IE                            00000001
TMR2IF                            00000001
TMR2IP                            00000001
TMR2ON                            00000002
TMR3                              00000FB2
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TO                                00000003
TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 77


SYMBOL TABLE
  LABEL                             VALUE 

TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TRNIE                             00000003
TRNIF                             00000003
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX                                00000006
TX9                               00000006
TX9D                              00000000
TXCKP                             00000004
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXIP                              00000004
TXREG                             00000FAD
TXSTA                             00000FAC
UA                                00000001
UADDR                             00000F6E
UCFG                              00000F6F
UCON                              00000F6D
UEIE                              00000F6B
UEIR                              00000F6A
UEP0                              00000F70
UEP1                              00000F71
UEP10                             00000F7A
UEP11                             00000F7B
UEP12                             00000F7C
UEP13                             00000F7D
UEP14                             00000F7E
UEP15                             00000F7F
UEP2                              00000F72
UEP3                              00000F73
UEP4                              00000F74
UEP5                              00000F75
UEP6                              00000F76
UEP7                              00000F77
UEP8                              00000F78
UEP9                              00000F79
UERRIE                            00000001
UERRIF                            00000001
UFRM                              00000F66
UFRMH                             00000F67
UFRML                             00000F66
UIE                               00000F69
UIR                               00000F68
UOEMON                            00000006
UPUEN                             00000004
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 78


SYMBOL TABLE
  LABEL                             VALUE 

URSTIE                            00000000
URSTIF                            00000000
USBEN                             00000003
USBIE                             00000005
USBIF                             00000005
USBIP                             00000005
USER_VARIABLE_SPACE               0x68
USTAT                             00000F6C
UTEYE                             00000007
UTRDIS                            00000003
VCFG0                             00000004
VCFG1                             00000005
VDIRMAG                           00000007
VREFM                             00000002
VREFP                             00000003
W                                 00000000
WCOL                              00000007
WDTCON                            00000FD1
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
WRSPP                             00000006
WS0                               00000000
WS1                               00000001
WS2                               00000002
WS3                               00000003
WUE                               00000001
Z                                 00000002
_.org_1_1104                      00001104
_BORV_0_2L                        000000E7
_BORV_1_2L                        000000EF
_BORV_2_2L                        000000F7
_BORV_3_2L                        000000FF
_BOR_OFF_2L                       000000F9
_BOR_ON_2L                        000000FF
_BOR_ON_ACTIVE_2L                 000000FD
_BOR_SOFT_2L                      000000FB
_CCP2MX_OFF_3H                    000000FE
_CCP2MX_ON_3H                     000000FF
_CONFIG1H                         00300001
_CONFIG1L                         00300000
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 79


SYMBOL TABLE
  LABEL                             VALUE 

_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CP2_OFF_5L                       000000FF
_CP2_ON_5L                        000000FB
_CP3_OFF_5L                       000000FF
_CP3_ON_5L                        000000F7
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
_CPD_ON_5H                        0000007F
_CPUDIV_OSC1_PLL2_1L              000000E7
_CPUDIV_OSC2_PLL3_1L              000000EF
_CPUDIV_OSC3_PLL4_1L              000000F7
_CPUDIV_OSC4_PLL6_1L              000000FF
_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTR2_OFF_7L                     000000FF
_EBTR2_ON_7L                      000000FB
_EBTR3_OFF_7L                     000000FF
_EBTR3_ON_7L                      000000F7
_EBTRB_OFF_7H                     000000FF
_EBTRB_ON_7H                      000000BF
_FCMEN_OFF_1H                     000000BF
_FCMEN_ON_1H                      000000FF
_FOSC_ECIO_EC_1H                  000000F4
_FOSC_ECPLLIO_EC_1H               000000F6
_FOSC_ECPLL_EC_1H                 000000F7
_FOSC_EC_EC_1H                    000000F5
_FOSC_HSPLL_HS_1H                 000000FE
_FOSC_HS_1H                       000000FC
_FOSC_INTOSCIO_EC_1H              000000F8
_FOSC_INTOSC_EC_1H                000000F9
_FOSC_INTOSC_HS_1H                000000FB
_FOSC_INTOSC_XT_1H                000000FA
_FOSC_XTPLL_XT_1H                 000000F2
_FOSC_XT_XT_1H                    000000F0
_ICPRT_OFF_4L                     000000DF
_ICPRT_ON_4L                      000000FF
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 80


SYMBOL TABLE
  LABEL                             VALUE 

_IESO_OFF_1H                      0000007F
_IESO_ON_1H                       000000FF
_LPT1OSC_OFF_3H                   000000FB
_LPT1OSC_ON_3H                    000000FF
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_MCLRE_OFF_3H                     0000007F
_MCLRE_ON_3H                      000000FF
_PBADEN_OFF_3H                    000000FD
_PBADEN_ON_3H                     000000FF
_PLLDIV_10_1L                     000000FE
_PLLDIV_12_1L                     000000FF
_PLLDIV_1_1L                      000000F8
_PLLDIV_2_1L                      000000F9
_PLLDIV_3_1L                      000000FA
_PLLDIV_4_1L                      000000FB
_PLLDIV_5_1L                      000000FC
_PLLDIV_6_1L                      000000FD
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_STVREN_OFF_4L                    000000FE
_STVREN_ON_4L                     000000FF
_USBDIV_1_1L                      000000DF
_USBDIV_2_1L                      000000FF
_VREGEN_OFF_2L                    000000DF
_VREGEN_ON_2L                     000000FF
_WDTPS_1024_2H                    000000F5
_WDTPS_128_2H                     000000EF
_WDTPS_16384_2H                   000000FD
_WDTPS_16_2H                      000000E9
_WDTPS_1_2H                       000000E1
_WDTPS_2048_2H                    000000F7
_WDTPS_256_2H                     000000F1
_WDTPS_2_2H                       000000E3
_WDTPS_32768_2H                   000000FF
_WDTPS_32_2H                      000000EB
_WDTPS_4096_2H                    000000F9
_WDTPS_4_2H                       000000E5
_WDTPS_512_2H                     000000F3
_WDTPS_64_2H                      000000ED
_WDTPS_8192_2H                    000000FB
_WDTPS_8_2H                       000000E7
_WDT_OFF_2H                       000000FE
_WDT_ON_2H                        000000FF
_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRT2_OFF_6L                      000000FF
_WRT2_ON_6L                       000000FB
_WRT3_OFF_6L                      000000FF
_WRT3_ON_6L                       000000F7
_WRTB_OFF_6H                      000000FF
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 81


SYMBOL TABLE
  LABEL                             VALUE 

_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_XINST_OFF_4L                     000000BF
_XINST_ON_4L                      000000FF
__18F4550                         00000001
adress1                           00000034
adress2                           00000035
baud                              00004B00
bitcnt                            00000078
brgdiv                            00000004
brgval                            00000019
button_mem                        0000006A
byte_to_str                       00001028
c_iah_addr1                       0000006C
c_iah_addr1s                      0000006E
c_iah_addr2                       0000006D
c_iah_addr2s                      0000006F
check_buttons                     000000D8
check_buttons_0                   0000013C
check_buttons_1                   0000014A
check_buttons_1_b                 00000150
check_buttons_2                   00000158
check_buttons_3                   00000166
check_buttons_3_s4                00000174
check_buttons_4                   0000017C
check_buttons_4_addrX             00000206
check_buttons_4_back              000001A6
check_buttons_4_clear_num         000001DC
check_buttons_4_dec_addrX         000001F8
check_buttons_4_inc_addrX         000001EA
check_buttons_4_stamp             000001B0
check_buttons_4_stamp_f           000001C8
check_buttons_4_stamp_fail        000001D2
check_buttons_5                   0000020E
check_buttons_6                   0000021C
clear_screen                      00001042
clock                             00000008
crc0                              00000038
crc1                              00000039
crccalc                           000006BE
crcloop                           0000003A
crcloopr                          000006B4
crcsend                           00000724
crctmp                            0000003B
current_s                         00000069
d1                                00000020
d10ms                             000010F8
d10ms_                            00001102
d10ms__                           000010FA
d1_tmp                            00000027
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 82


SYMBOL TABLE
  LABEL                             VALUE 

d1s                               00001116
d1s_0                             00001122
d2                                00000021
d2_tmp                            00000028
d3                                00000022
d3_tmp                            00000029
d4                                00000023
devid_divid                       000009D4
disable_marker                    0000105E
divid0                            00000072
divid1                            00000073
divid2                            00000074
divid3                            00000075
divide                            000010B2
divisH                            00000071
divisL                            00000070
dvloop                            000010BA
enable_marker                     00001050
endflag                           00000738
framelen                          0000003C
func_bc                           00000486
func_bc_01                        000004E2
func_bc_sendaddr                  00000502
func_check_response               0000041E
func_is_ocupied_send_response     00000426
func_is_ocupied_send_response_go  00000438
func_is_ocupied_send_response_pa  0000043E
func_rand_addr                    00000582
func_send_iam_here                0000054A
func_send_response                000003D8
func_set_rsp_addr                 000005A6
func_setport                      00000594
func_speedlib_config              000002FC
func_speedlib_config_basics       00000388
func_speedlib_config_caddr        00000332
func_speedlib_config_caddr_f      00000368
func_speedlib_config_extended     00000312
got_iah                           0000007E
got_iah_serve                     0000008A
handle_response                   000005C4
handle_response_loop              000005D6
handle_response_ret               000005F6
init_checkaddr                    0000003A
init_checkaddr_l                  0000003E
init_checkaddr_not_ocupied        0000007E
init_checkaddr_ocupied            0000008A
init_speedlib                     00000000
init_speedlib_e                   00000038
intserv                           00000110
intserv_norm                      00000126
lfsr_func                         00000770
loop1                             0000002B
loop2                             0000002C
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 83


SYMBOL TABLE
  LABEL                             VALUE 

lopp                              00000714
main                              0000006C
main_var                          0000006B
on_got_IAH                        got_iah
printW                            00000094
printW_loop                       0000009C
printW_loop2                      000000C2
rand                              0000002A
rc1                               00000055
rc10                              0000005E
rc11                              0000005F
rc12                              00000060
rc13                              00000061
rc14                              00000062
rc15                              00000063
rc16                              00000064
rc17                              00000065
rc18                              00000066
rc19                              00000067
rc2                               00000056
rc20                              00000068
rc3                               00000057
rc4                               00000058
rc5                               00000059
rc6                               0000005A
rc7                               0000005B
rc8                               0000005C
rc9                               0000005D
rc_add_byte                       00000031
rc_counter                        0000002E
rc_gotflag                        0000002F
rc_listen                         0000002D
rc_nocoll                         00000030
rcframe                           00000054
rec                               00000168
rec_oops_coll                     00000182
rec_start                         0000018A
reccrcfail                        000005FE
recend                            00000220
recend_no_broadcast               00000284
recend_tmp                        00000278
recerror                          00000608
recr                              000001B2
recsave                           000001B6
recsave_add                       00000204
recsave_set                       000001D2
recsave_unescape                  000001DA
recsave_unescape_1                000001F8
recsave_unescape_2                000001FE
recx                              000001A2
remdrH                            00000077
remdrL                            00000076
remrlt                            000010F0
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 84


SYMBOL TABLE
  LABEL                             VALUE 

restore                           00000148
restore_norm                      0000014E
rsp_adress1                       00000032
rsp_adress2                       00000033
screen_0                          00000EA8
screen_1                          00000D2C
screen_2                          00000A52
screen_2_broken                   00000CBE
screen_2_live                     00000C62
screen_3                          00000886
screen_4                          0000066C
screen_4_caddr2                   0000087A
screen_5                          000003D4
screen_5_stamp_got_rsp            000005F2
screen_5_stamp_rsp                0000051E
screen_6                          0000022A
send                              00000708
set_daddr                         00001036
setaddr                           00000090
setaddr1                          0000009A
setaddr2                          000000AE
setaddr_testloop                  000000EC
setaddr_testloop_l                000000F2
speedlib_config                   00000036
speedlib_main                     00000037
start_display                     0000106C
subd                              000010E2
temp                              00000079
temp1                             0000007A
temp2                             0000007B
testgt                            000010DC
tmp1                              0000007C
tmp10                             00000085
tmp2                              0000007D
tmp3                              0000007E
tmp4                              0000007F
tmp5                              00000080
tmp6                              00000081
tmp7                              00000082
tmp8                              00000083
tmp9                              00000084
tmp_PCLATH                        00000026
tmp_STATUS                        00000025
tmp_W                             00000024
trd                               0000074A
tx1                               00000040
tx10                              00000049
tx11                              0000004A
tx12                              0000004B
tx13                              0000004C
tx14                              0000004D
tx15                              0000004E
tx16                              0000004F
MPASM  5.42  /HOME/OSCAR/SPEEDBUS/PIC/MPLABX.   8-3-2012  23:38:57         PAGE 85


SYMBOL TABLE
  LABEL                             VALUE 

tx17                              00000050
tx18                              00000051
tx19                              00000052
tx2                               00000041
tx20                              00000053
tx3                               00000042
tx4                               00000043
tx5                               00000044
tx6                               00000045
tx7                               00000046
tx8                               00000047
tx9                               00000048
tx_send                           00000624
tx_send_escape_1                  0000067E
tx_send_escape_2                  0000068C
tx_send_noescape                  0000063E
tx_send_noescape_d1               00000650
tx_send_noescape_d2               0000066E
tx_send_noescape_l                00000644
txdo                              0000069A
txdo2                             000006F0
txframe                           0000003F
txoops                            00000610
txreturn                          0000003E
txtmp                             0000003D
v_reset                           0000001A
w_char                            0000109C
w_ins                             00001096
w_lcd                             0000109E

Errors   :     0
Warnings :     3 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

